(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{CcaC:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UserService}));var _angular_common_http__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("IheW"),src_environments_environment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("AytR"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("HDdC"),socket_io_client__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("gFX4"),_session_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("0hB7"),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("8Y7J");let UserService=(()=>{class UserService{constructor(httpClient,sessionService){this.httpClient=httpClient,this.sessionService=sessionService,this.socket=socket_io_client__WEBPACK_IMPORTED_MODULE_3__(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url)}getUsers(){return this.httpClient.get(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users")}getUser(){return this.httpClient.get(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users/"+this.sessionService.getItem("_id"))}getUsersByCompany(){return this.httpClient.get(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users/get-by-company/"+this.sessionService.getItem("company_id"))}addUser(data){var body=JSON.stringify(data);console.log("body",body);var headerOption=new _angular_common_http__WEBPACK_IMPORTED_MODULE_0__.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.post(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users",body,{headers:headerOption})}updateUser(data){var body=JSON.stringify(data);console.log("body",body);var headerOption=new _angular_common_http__WEBPACK_IMPORTED_MODULE_0__.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.put(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users/"+data._id,body,{headers:headerOption})}deleteUser(id){return this.httpClient.delete(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users/"+id)}onCheckEmailExist(data){return this.httpClient.get(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url+"/api/users/check-email-exist/"+data)}addUserSocktet(){return new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(observer=>(this.socket=socket_io_client__WEBPACK_IMPORTED_MODULE_3__(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url),this.socket.on("add",data=>{observer.next(data)}),()=>{this.socket.disconnect()}))}deleteUserSocktet(){return new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(observer=>(this.socket=socket_io_client__WEBPACK_IMPORTED_MODULE_3__(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url),this.socket.on("delete",data=>{observer.next(data)}),()=>{this.socket.disconnect()}))}updateUserSocktet(){return new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(observer=>(this.socket=socket_io_client__WEBPACK_IMPORTED_MODULE_3__(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url),this.socket.on("update",data=>{observer.next(data)}),()=>{this.socket.disconnect()}))}statusUpdateUserSocktet(){return new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(observer=>(this.socket=socket_io_client__WEBPACK_IMPORTED_MODULE_3__(src_environments_environment__WEBPACK_IMPORTED_MODULE_1__.a.api_url),this.socket.on("status",data=>{observer.next(data)}),()=>{this.socket.disconnect()}))}}return UserService.ngInjectableDef=_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineInjectable"]({factory:function(){return new UserService(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_0__.HttpClient),_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵinject"](_session_service__WEBPACK_IMPORTED_MODULE_4__.a))},token:UserService,providedIn:"root"}),UserService})()},DX9g:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ImageUploadService}));var src_environments_environment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("AytR"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("8Y7J"),_angular_common_http__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("IheW");let ImageUploadService=(()=>{class ImageUploadService{constructor(httpClient){this.httpClient=httpClient}imageUpload(data){let formData=new FormData;return formData.append("image",data,data.name),console.log("body",formData),this.httpClient.post(src_environments_environment__WEBPACK_IMPORTED_MODULE_0__.a.api_url+"/api/image-upload",formData)}profileImageUpload(data){let formData=new FormData;return formData.append("image",data,data.name),console.log("body",formData),this.httpClient.post(src_environments_environment__WEBPACK_IMPORTED_MODULE_0__.a.api_url+"/api/image-upload/profile",formData)}companyLogoUpload(data){let formData=new FormData;return formData.append("image",data,data.name),console.log("body",formData),this.httpClient.post(src_environments_environment__WEBPACK_IMPORTED_MODULE_0__.a.api_url+"/api/image-upload/logo",formData)}}return ImageUploadService.ngInjectableDef=_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({factory:function(){return new ImageUploadService(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient))},token:ImageUploadService,providedIn:"root"}),ImageUploadService})()},NqMA:function(module,exports,__webpack_require__){"use strict";var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__metadata=this&&this.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=__webpack_require__("8Y7J"),common_1=__webpack_require__("SVse"),domhandler_1=__webpack_require__("sdDj"),Password=function(){function Password(el,zone){this.el=el,this.zone=zone,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(Password.prototype,"showPassword",{set:function(show){this.el.nativeElement.type=show?"text":"password"},enumerable:!0,configurable:!0}),Password.prototype.ngDoCheck=function(){this.updateFilledState()},Password.prototype.onInput=function(e){this.updateFilledState()},Password.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},Password.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=domhandler_1.DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},Password.prototype.onFocus=function(e){var _this=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++domhandler_1.DomHandler.zindex),this.zone.runOutsideAngular((function(){setTimeout((function(){domhandler_1.DomHandler.addClass(_this.panel,"ui-password-panel-visible"),domhandler_1.DomHandler.removeClass(_this.panel,"ui-password-panel-hidden")}),1),domhandler_1.DomHandler.absolutePosition(_this.panel,_this.el.nativeElement)})))},Password.prototype.onBlur=function(e){var _this=this;this.feedback&&(domhandler_1.DomHandler.addClass(this.panel,"ui-password-panel-hidden"),domhandler_1.DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular((function(){setTimeout((function(){_this.ngOnDestroy()}),150)})))},Password.prototype.onKeyup=function(e){if(this.feedback){var value=e.target.value,label=null,meterPos=null;if(0===value.length)label=this.promptLabel,meterPos="0px 0px";else{var score=this.testStrength(value);score<30?(label=this.weakLabel,meterPos="0px -10px"):score>=30&&score<80?(label=this.mediumLabel,meterPos="0px -20px"):score>=80&&(label=this.strongLabel,meterPos="0px -30px")}this.meter.style.backgroundPosition=meterPos,this.info.textContent=label}},Password.prototype.testStrength=function(str){var val,grade=0;return val=str.match("[0-9]"),grade+=25*this.normalize(val?val.length:.25,1),val=str.match("[a-zA-Z]"),grade+=10*this.normalize(val?val.length:.5,3),val=str.match("[!@#$%^&*?_~.,;=]"),grade+=35*this.normalize(val?val.length:1/6,1),val=str.match("[A-Z]"),grade+=30*this.normalize(val?val.length:1/6,1),(grade*=str.length/8)>100?100:grade},Password.prototype.normalize=function(x,y){return x-y<=0?x/y:1+x/(x+y/4)*.5},Object.defineProperty(Password.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),Password.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},__decorate([core_1.Input(),__metadata("design:type",String)],Password.prototype,"promptLabel",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],Password.prototype,"weakLabel",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],Password.prototype,"mediumLabel",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],Password.prototype,"strongLabel",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],Password.prototype,"feedback",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],Password.prototype,"showPassword",null),__decorate([core_1.HostListener("input",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],Password.prototype,"onInput",null),__decorate([core_1.HostListener("focus",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],Password.prototype,"onFocus",null),__decorate([core_1.HostListener("blur",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],Password.prototype,"onBlur",null),__decorate([core_1.HostListener("keyup",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],Password.prototype,"onKeyup",null),__decorate([core_1.Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}}),__metadata("design:paramtypes",[core_1.ElementRef,core_1.NgZone])],Password)}();exports.Password=Password;var PasswordModule=__decorate([core_1.NgModule({imports:[common_1.CommonModule],exports:[Password],declarations:[Password]})],(function(){}));exports.PasswordModule=PasswordModule},"YD+O":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ImageCropperComponent})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ImageCropperModule}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8Y7J");class ImageCropperComponent{constructor(sanitizer,cd,zone){this.sanitizer=sanitizer,this.cd=cd,this.zone=zone,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="base64",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.startCropImage=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.imageLoaded=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.cropperReady=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.loadImageFailed=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.initCropper()}set imageChangedEvent(event){this.initCropper(),event&&event.target&&event.target.files&&event.target.files.length>0&&this.loadImageFile(event.target.files[0])}set imageBase64(imageBase64){this.initCropper(),this.checkExifAndLoadBase64Image(imageBase64)}set imageFile(file){this.initCropper(),file&&this.loadImageFile(file)}ngOnChanges(changes){this.originalImage&&this.originalImage.complete&&changes.containWithinAspectRatio&&this.transformOriginalImage(),changes.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),changes.aspectRatio&&this.imageVisible&&this.resetCropperPosition()}ngOnInit(){this.stepSize=this.initialStepSize}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.transformations={rotation:0,flipH:!1,flipV:!1},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(file){const fileReader=new FileReader;fileReader.onload=event=>{this.isValidImageType(file.type)?this.checkExifAndLoadBase64Image(event.target.result):this.loadImageFailed.emit()},fileReader.readAsDataURL(file)}isValidImageType(type){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(type)}checkExifAndLoadBase64Image(imageBase64){return new Promise((resolve,reject)=>{const fail=ex=>{this.originalImage=null,this.originalBase64=null,reject(ex)};this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=imageBase64,this.transformations=function(exifRotationOrBase64Image){switch("string"==typeof exifRotationOrBase64Image&&(exifRotationOrBase64Image=function(imageBase64){const view=new DataView(function(imageBase64){imageBase64=imageBase64.replace(/^data\:([^\;]+)\;base64,/gim,"");const binaryString=atob(imageBase64),len=binaryString.length,bytes=new Uint8Array(len);for(let i=0;i<len;i++)bytes[i]=binaryString.charCodeAt(i);return bytes.buffer}(imageBase64));if(65496!=view.getUint16(0,!1))return-2;const length=view.byteLength;let offset=2;for(;offset<length;){if(view.getUint16(offset+2,!1)<=8)return-1;const marker=view.getUint16(offset,!1);if(offset+=2,65505==marker){if(1165519206!=view.getUint32(offset+=2,!1))return-1;const little=18761==view.getUint16(offset+=6,!1);offset+=view.getUint32(offset+4,little);const tags=view.getUint16(offset,little);offset+=2;for(let i=0;i<tags;i++)if(274==view.getUint16(offset+12*i,little))return view.getUint16(offset+12*i+8,little)}else{if(65280!=(65280&marker))break;offset+=view.getUint16(offset,!1)}}return-1}(exifRotationOrBase64Image)),exifRotationOrBase64Image){case 2:return{rotation:0,flipH:!0,flipV:!1};case 3:return{rotation:2,flipH:!1,flipV:!1};case 4:return{rotation:2,flipH:!0,flipV:!1};case 5:return{rotation:1,flipH:!0,flipV:!1};case 6:return{rotation:1,flipH:!1,flipV:!1};case 7:return{rotation:3,flipH:!0,flipV:!1};case 8:return{rotation:3,flipH:!1,flipV:!1};default:return{rotation:0,flipH:!1,flipV:!1}}}(imageBase64),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,this.transformOriginalImage().then(()=>resolve()).catch(fail)},this.originalImage.onerror=fail,this.originalImage.src=imageBase64})}checkRotation(){this.transformations.rotation<0&&(this.transformations.rotation+=4),this.transformations.rotation=this.transformations.rotation%4}getTransformedSize(){if(this.containWithinAspectRatio){if(this.transformations.rotation%2){const minHeightToContain=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,minHeightToContain)}}{const minHeightToContain=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,minHeightToContain)}}}return this.transformations.rotation%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}transformImageBase64(){this.checkRotation();const transformedSize=this.getTransformedSize(),canvas=document.createElement("canvas");canvas.width=transformedSize.width,canvas.height=transformedSize.height;const ctx=canvas.getContext("2d");return ctx.setTransform(this.transformations.flipH?-1:1,0,0,this.transformations.flipV?-1:1,canvas.width/2,canvas.height/2),ctx.rotate(Math.PI*(this.transformations.rotation/2)),ctx.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),Promise.resolve(canvas.toDataURL())}setTransformedImage(transformedBase64){return new Promise((resolve,reject)=>{this.transformedBase64=transformedBase64,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(transformedBase64),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,resolve(),this.cd.markForCheck()},this.transformedImage.onerror=()=>{this.transformedImage=null,reject()},this.transformedImage.src=this.transformedBase64})}transformOriginalImage(){return this.originalImage&&this.originalImage.complete?this.transformImageBase64().then(transformedBase64=>this.setTransformedImage(transformedBase64)):Promise.reject(new Error("No Image Loaded"))}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>{this.checkImageMaxSizeRecursively()},50))}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}rotateLeft(){return this.transformations.rotation--,this.flipAfterRotate(),this.transformOriginalImage()}rotateRight(){return this.transformations.rotation++,this.flipAfterRotate(),this.transformOriginalImage()}flipAfterRotate(){const flippedH=this.transformations.flipH;this.transformations.flipH=this.transformations.flipV,this.transformations.flipV=flippedH}flipHorizontal(){return this.transformations.flipH=!this.transformations.flipH,this.transformOriginalImage()}flipVertical(){return this.transformations.flipV=!this.transformations.flipV,this.transformOriginalImage()}resetImage(){this.imageBase64=this.originalBase64}resizeCropperPosition(){const sourceImageElement=this.sourceImage.nativeElement;this.maxSize.width===sourceImageElement.offsetWidth&&this.maxSize.height===sourceImageElement.offsetHeight||(this.cropper.x1=this.cropper.x1*sourceImageElement.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*sourceImageElement.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*sourceImageElement.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*sourceImageElement.offsetHeight/this.maxSize.height)}resetCropperPosition(){const sourceImageElement=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(sourceImageElement.offsetWidth/this.aspectRatio<sourceImageElement.offsetHeight){this.cropper.x1=0,this.cropper.x2=sourceImageElement.offsetWidth;const cropperHeight=sourceImageElement.offsetWidth/this.aspectRatio;this.cropper.y1=(sourceImageElement.offsetHeight-cropperHeight)/2,this.cropper.y2=this.cropper.y1+cropperHeight}else{this.cropper.y1=0,this.cropper.y2=sourceImageElement.offsetHeight;const cropperWidth=sourceImageElement.offsetHeight*this.aspectRatio;this.cropper.x1=(sourceImageElement.offsetWidth-cropperWidth)/2,this.cropper.x2=this.cropper.x1+cropperWidth}else this.cropper.x1=0,this.cropper.x2=sourceImageElement.offsetWidth,this.cropper.y1=0,this.cropper.y2=sourceImageElement.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(event){this.changeKeyboardStepSize(event),this.keyboardMoveCropper(event)}changeKeyboardStepSize(event){event.key>="1"&&event.key<="9"&&(this.stepSize=+event.key)}keyboardMoveCropper(event){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(event.key))return;const moveType=event.shiftKey?"resize":"move",position=event.altKey?this.getInvertedPositionForKey(event.key):this.getPositionForKey(event.key),moveEvent=this.getEventForKey(event.key,this.stepSize);event.preventDefault(),event.stopPropagation(),this.startMove({clientX:0,clientY:0},moveType,position),this.moveImg(moveEvent),this.moveStop()}getPositionForKey(key){switch(key){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(key){switch(key){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(key,stepSize){switch(key){case"ArrowUp":return{clientX:0,clientY:-1*stepSize};case"ArrowRight":return{clientX:stepSize,clientY:0};case"ArrowDown":return{clientX:0,clientY:stepSize};case"ArrowLeft":default:return{clientX:-1*stepSize,clientY:0}}}startMove(event,moveType,position=null){event.preventDefault&&event.preventDefault(),this.moveStart=Object.assign({active:!0,type:moveType,position:position,clientX:this.getClientX(event),clientY:this.getClientY(event)},this.cropper)}moveImg(event){this.moveStart.active&&(event.stopPropagation&&event.stopPropagation(),event.preventDefault&&event.preventDefault(),"move"===this.moveStart.type?(this.move(event),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(event),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const sourceImageElement=this.sourceImage.nativeElement;this.maxSize.width=sourceImageElement.offsetWidth,this.maxSize.height=sourceImageElement.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(maintainSize=!1){this.cropper.x1<0&&(this.cropper.x2-=maintainSize?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=maintainSize?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=maintainSize?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=maintainSize?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(event){const diffX=this.getClientX(event)-this.moveStart.clientX,diffY=this.getClientY(event)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+diffX,this.cropper.y1=this.moveStart.y1+diffY,this.cropper.x2=this.moveStart.x2+diffX,this.cropper.y2=this.moveStart.y2+diffY}resize(event){const diffX=this.getClientX(event)-this.moveStart.clientX,diffY=this.getClientY(event)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+diffX,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+diffX,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+diffY,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+diffY,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+diffX,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+diffY,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+diffX,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+diffX,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+diffY,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+diffY,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+diffX,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+diffY,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let overflowX=0,overflowY=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,overflowX=Math.max(this.cropper.x2-this.maxSize.width,0),overflowY=Math.max(0-this.cropper.y1,0),(overflowX>0||overflowY>0)&&(this.cropper.x2-=overflowY*this.aspectRatio>overflowX?overflowY*this.aspectRatio:overflowX,this.cropper.y1+=overflowY*this.aspectRatio>overflowX?overflowY:overflowX/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,overflowX=Math.max(this.cropper.x2-this.maxSize.width,0),overflowY=Math.max(this.cropper.y2-this.maxSize.height,0),(overflowX>0||overflowY>0)&&(this.cropper.x2-=overflowY*this.aspectRatio>overflowX?overflowY*this.aspectRatio:overflowX,this.cropper.y2-=overflowY*this.aspectRatio>overflowX?overflowY:overflowX/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,overflowX=Math.max(0-this.cropper.x1,0),overflowY=Math.max(0-this.cropper.y1,0),(overflowX>0||overflowY>0)&&(this.cropper.x1+=overflowY*this.aspectRatio>overflowX?overflowY*this.aspectRatio:overflowX,this.cropper.y1+=overflowY*this.aspectRatio>overflowX?overflowY:overflowX/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,overflowX=Math.max(this.cropper.x2-this.maxSize.width,0),overflowY=Math.max(0-this.cropper.y1,0),(overflowX>0||overflowY>0)&&(this.cropper.x2-=overflowY*this.aspectRatio>overflowX?overflowY*this.aspectRatio:overflowX,this.cropper.y1+=overflowY*this.aspectRatio>overflowX?overflowY:overflowX/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,overflowX=Math.max(this.cropper.x2-this.maxSize.width,0),overflowY=Math.max(this.cropper.y2-this.maxSize.height,0),(overflowX>0||overflowY>0)&&(this.cropper.x2-=overflowY*this.aspectRatio>overflowX?overflowY*this.aspectRatio:overflowX,this.cropper.y2-=overflowY*this.aspectRatio>overflowX?overflowY:overflowX/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,overflowX=Math.max(0-this.cropper.x1,0),overflowY=Math.max(this.cropper.y2-this.maxSize.height,0),(overflowX>0||overflowY>0)&&(this.cropper.x1+=overflowY*this.aspectRatio>overflowX?overflowY*this.aspectRatio:overflowX,this.cropper.y2-=overflowY*this.aspectRatio>overflowX?overflowY:overflowX/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(outputType=this.outputType){if(this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const imagePosition=this.getImagePosition(),width=imagePosition.x2-imagePosition.x1,height=imagePosition.y2-imagePosition.y1,cropCanvas=document.createElement("canvas");cropCanvas.width=width,cropCanvas.height=height;const ctx=cropCanvas.getContext("2d");if(ctx){null!=this.backgroundColor&&(ctx.fillStyle=this.backgroundColor,ctx.fillRect(0,0,width,height)),ctx.drawImage(this.transformedImage,imagePosition.x1,imagePosition.y1,width,height,0,0,width,height);const output={width:width,height:height,imagePosition:imagePosition,cropperPosition:Object.assign({},this.cropper),transform:Object.assign({},this.transformations)};this.containWithinAspectRatio&&(output.offsetImagePosition=this.getOffsetImagePosition());const resizeRatio=this.getResizeRatio(width,height);return 1!==resizeRatio&&(output.width=Math.round(width*resizeRatio),output.height=this.maintainAspectRatio?Math.round(output.width/this.aspectRatio):Math.round(height*resizeRatio),function(canvas,width,height,resizeCanvas=!0){const width_source=canvas.width,height_source=canvas.height,ratio_w=width_source/(width=Math.round(width)),ratio_h=height_source/(height=Math.round(height)),ratio_w_half=Math.ceil(ratio_w/2),ratio_h_half=Math.ceil(ratio_h/2),ctx=canvas.getContext("2d");if(ctx){const img=ctx.getImageData(0,0,width_source,height_source),img2=ctx.createImageData(width,height),data=img.data,data2=img2.data;for(let j=0;j<height;j++)for(let i=0;i<width;i++){const x2=4*(i+j*width),center_y=j*ratio_h;let weight=0,weights=0,weights_alpha=0,gx_r=0,gx_g=0,gx_b=0,gx_a=0;const xx_start=Math.floor(i*ratio_w),yy_start=Math.floor(j*ratio_h);let xx_stop=Math.ceil((i+1)*ratio_w),yy_stop=Math.ceil((j+1)*ratio_h);xx_stop=Math.min(xx_stop,width_source),yy_stop=Math.min(yy_stop,height_source);for(let yy=yy_start;yy<yy_stop;yy++){const dy=Math.abs(center_y-yy)/ratio_h_half,center_x=i*ratio_w,w0=dy*dy;for(let xx=xx_start;xx<xx_stop;xx++){const dx=Math.abs(center_x-xx)/ratio_w_half,w=Math.sqrt(w0+dx*dx);if(w>=1)continue;weight=2*w*w*w-3*w*w+1;const pos_x=4*(xx+yy*width_source);gx_a+=weight*data[pos_x+3],weights_alpha+=weight,data[pos_x+3]<255&&(weight=weight*data[pos_x+3]/250),gx_r+=weight*data[pos_x],gx_g+=weight*data[pos_x+1],gx_b+=weight*data[pos_x+2],weights+=weight}}data2[x2]=gx_r/weights,data2[x2+1]=gx_g/weights,data2[x2+2]=gx_b/weights,data2[x2+3]=gx_a/weights_alpha}resizeCanvas?(canvas.width=width,canvas.height=height):ctx.clearRect(0,0,width_source,height_source),ctx.putImageData(img2,0,0)}}(cropCanvas,output.width,output.height)),this.cropToOutputType(outputType,cropCanvas,output)}}return null}getImagePosition(){const ratio=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,out={x1:Math.round(this.cropper.x1*ratio),y1:Math.round(this.cropper.y1*ratio),x2:Math.round(this.cropper.x2*ratio),y2:Math.round(this.cropper.y2*ratio)};return this.containWithinAspectRatio||(out.x1=Math.max(out.x1,0),out.y1=Math.max(out.y1,0),out.x2=Math.min(out.x2,this.transformedSize.width),out.y2=Math.min(out.y2,this.transformedSize.height)),out}getOffsetImagePosition(){const ratio=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let offsetX,offsetY;this.transformations.rotation%2?(offsetX=(this.transformedSize.width-this.originalSize.height)/2,offsetY=(this.transformedSize.height-this.originalSize.width)/2):(offsetX=(this.transformedSize.width-this.originalSize.width)/2,offsetY=(this.transformedSize.height-this.originalSize.height)/2);const out={x1:Math.round(this.cropper.x1*ratio)-offsetX,y1:Math.round(this.cropper.y1*ratio)-offsetY,x2:Math.round(this.cropper.x2*ratio)-offsetX,y2:Math.round(this.cropper.y2*ratio)-offsetY};return this.containWithinAspectRatio||(out.x1=Math.max(out.x1,0),out.y1=Math.max(out.y1,0),out.x2=Math.min(out.x2,this.transformedSize.width),out.y2=Math.min(out.y2,this.transformedSize.height)),out}cropToOutputType(outputType,cropCanvas,output){switch(outputType){case"file":return this.cropToFile(cropCanvas).then(result=>(output.file=result,this.imageCropped.emit(output),output));case"both":return output.base64=this.cropToBase64(cropCanvas),this.cropToFile(cropCanvas).then(result=>(output.file=result,this.imageCropped.emit(output),output));default:return output.base64=this.cropToBase64(cropCanvas),this.imageCropped.emit(output),output}}cropToBase64(cropCanvas){return cropCanvas.toDataURL("image/"+this.format,this.getQuality())}cropToFile(cropCanvas){return new Promise(resolve=>{cropCanvas.toBlob(result=>this.zone.run(()=>resolve(result)),"image/"+this.format,this.getQuality())})}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(width,height){if(this.resizeToWidth>0){if(!this.onlyScaleDown||width>this.resizeToWidth)return this.resizeToWidth/width}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||height>this.resizeToHeight))return this.resizeToHeight/height;return 1}getClientX(event){return(event.touches&&event.touches[0]?event.touches[0].clientX:event.clientX)||0}getClientY(event){return(event.touches&&event.touches[0]?event.touches[0].clientY:event.clientY)||0}}class ImageCropperModule{}},eiLQ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RenderType_InputMask})),__webpack_require__.d(__webpack_exports__,"b",(function(){return View_InputMask_0}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8Y7J"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("oz/p"),__webpack_require__("SVse")),_inputtext_inputtext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Fa87"),_angular_forms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("s7LF"),RenderType_InputMask=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵcrt"]({encapsulation:2,styles:[],data:{}});function View_InputMask_0(_l){return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵvid"](0,[_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵqud"](402653184,1,{inputViewChild:0}),(_l()(),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵeld"](1,0,[[1,0],["input",1]],null,5,"input",[["pInputText",""]],[[1,"id",0],[1,"type",0],[1,"name",0],[1,"placeholder",0],[1,"title",0],[1,"size",0],[1,"autocomplete",0],[1,"maxlength",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-required",0],[8,"disabled",0],[8,"readOnly",0],[1,"required",0],[1,"autofocus",0],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"focus"],[null,"blur"],[null,"keydown"],[null,"keypress"],[null,"input"],[null,"paste"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return"input"===en&&(ad=!1!==_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵnov"](_v,6).onInput($event)&&ad),"focus"===en&&(ad=!1!==_co.onInputFocus($event)&&ad),"blur"===en&&(ad=!1!==_co.onInputBlur($event)&&ad),"keydown"===en&&(ad=!1!==_co.onKeyDown($event)&&ad),"keypress"===en&&(ad=!1!==_co.onKeyPress($event)&&ad),"input"===en&&(ad=!1!==_co.onInputChange($event)&&ad),"paste"===en&&(ad=!1!==_co.handleInputChange($event)&&ad),ad}),null,null)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵprd"](512,null,_angular_common__WEBPACK_IMPORTED_MODULE_2__["ɵNgClassImpl"],_angular_common__WEBPACK_IMPORTED_MODULE_2__["ɵNgClassR2Impl"],[_angular_core__WEBPACK_IMPORTED_MODULE_0__.IterableDiffers,_angular_core__WEBPACK_IMPORTED_MODULE_0__.KeyValueDiffers,_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵdid"](3,278528,null,0,_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgClass,[_angular_common__WEBPACK_IMPORTED_MODULE_2__["ɵNgClassImpl"]],{ngClass:[0,"ngClass"]},null),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵprd"](512,null,_angular_common__WEBPACK_IMPORTED_MODULE_2__["ɵNgStyleImpl"],_angular_common__WEBPACK_IMPORTED_MODULE_2__["ɵNgStyleR2Impl"],[_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef,_angular_core__WEBPACK_IMPORTED_MODULE_0__.KeyValueDiffers,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵdid"](5,278528,null,0,_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgStyle,[_angular_common__WEBPACK_IMPORTED_MODULE_2__["ɵNgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵdid"](6,278528,null,0,_inputtext_inputtext__WEBPACK_IMPORTED_MODULE_3__.InputText,[_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef,[2,_angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgModel]],null,null)],(function(_ck,_v){var _co=_v.component;_ck(_v,3,0,_co.styleClass),_ck(_v,5,0,_co.style),_ck(_v,6,0)}),(function(_ck,_v){var _co=_v.component;_ck(_v,1,1,[_co.inputId,_co.type,_co.name,_co.placeholder,_co.title,_co.size,_co.autocomplete,_co.maxlength,_co.tabindex,_co.ariaLabel,_co.ariaRequired,_co.disabled,_co.readonly,_co.required,_co.autoFocus,!0,!0,!0,!0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵnov"](_v,6).filled])}))}}}]);