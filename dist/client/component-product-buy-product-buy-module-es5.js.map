{"version":3,"sources":["src/app/component/product-buy/product-buy.component.html","src/app/component/product-buy/product-buy-routing.module.ts","src/app/component/product-buy/product-buy.component.sass","src/app/component/product-buy/product-buy.component.ts","src/app/component/product-buy/product-buy.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<div style=\\\"margin-top: 15px;\\\">\\r\\n<p-card >\\r\\n<!-- Product Price:Rs 4500.00 -->\\r\\n<!-- <div id=\\\"paypal-checkout-btn\\\"></div> -->\\r\\n<!-- <pre>{{ paymentDetails | json }}</pre>  -->\\r\\n<div class=\\\"ui-g ui-fluid\\\" >\\r\\n<div  *ngIf=\\\"paymentDetails.plan_type == '0'\\\">\\r\\n      <div class=\\\"ui-g-12\\\">\\r\\n        <div class=\\\"ui-g-4\\\">\\r\\n            <label for=\\\"vin\\\">Plan Type</label>\\r\\n        </div>\\r\\n        <div class=\\\"ui-g-8\\\">\\r\\n                <span class=\\\"label label-warning\\\"  >Free Account </span>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"ui-g-12\\\">\\r\\n            <div class=\\\"ui-g-4\\\">\\r\\n                <label for=\\\"vin\\\">Payment Amount</label>\\r\\n            </div>\\r\\n            <div class=\\\"ui-g-8\\\">\\r\\n                    {{paymentDetails.payment_amount | currency : 'INR':true}}\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"ui-g-12\\\">\\r\\n                <div class=\\\"ui-g-4\\\">\\r\\n                    <label for=\\\"vin\\\">Currency</label>\\r\\n                </div>\\r\\n                <div class=\\\"ui-g-8\\\">\\r\\n                        {{paymentDetails.currency}}\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class=\\\"ui-g-12\\\">\\r\\n                    <div class=\\\"ui-g-4\\\">\\r\\n                        <label for=\\\"vin\\\">Expiry Date</label>\\r\\n                    </div>\\r\\n                    <div class=\\\"ui-g-8\\\">\\r\\n                            {{paymentDetails.expiry_date | date:'medium'}}\\r\\n                    </div>\\r\\n                </div>\\r\\n</div>\\r\\n\\r\\n<div  *ngIf=\\\"paymentDetails.plan_type == '1'\\\">\\r\\n        <div class=\\\"ui-g-12\\\">\\r\\n          <div class=\\\"ui-g-4\\\">\\r\\n              <label for=\\\"vin\\\">Plan Type</label>\\r\\n          </div>\\r\\n          <div class=\\\"ui-g-8\\\">\\r\\n                \\r\\n                <span class=\\\"label label-success\\\" >Paid Account</span>\\r\\n          </div>\\r\\n      </div>\\r\\n      <div class=\\\"ui-g-12\\\">\\r\\n              <div class=\\\"ui-g-4\\\">\\r\\n                  <label for=\\\"vin\\\">Payment Amount</label>\\r\\n              </div>\\r\\n              <div class=\\\"ui-g-8\\\">\\r\\n                      {{paymentDetails.payment_amount | currency : 'INR':true}}\\r\\n              </div>\\r\\n          </div>\\r\\n          <div class=\\\"ui-g-12\\\">\\r\\n                  <div class=\\\"ui-g-4\\\">\\r\\n                      <label for=\\\"vin\\\">Currency</label>\\r\\n                  </div>\\r\\n                  <div class=\\\"ui-g-8\\\">\\r\\n                          {{paymentDetails.currency}}\\r\\n                  </div>\\r\\n              </div>\\r\\n              <div class=\\\"ui-g-12\\\">\\r\\n                    <div class=\\\"ui-g-4\\\">\\r\\n                        <label for=\\\"vin\\\">Email</label>\\r\\n                    </div>\\r\\n                    <div class=\\\"ui-g-8\\\">\\r\\n                            {{paymentDetails.payment_details.email}}\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"ui-g-12\\\">\\r\\n                        <div class=\\\"ui-g-4\\\">\\r\\n                            <label for=\\\"vin\\\">Type</label>\\r\\n                        </div>\\r\\n                        <div class=\\\"ui-g-8\\\">\\r\\n                                {{paymentDetails.payment_details.type}}\\r\\n                        </div>\\r\\n                    </div>\\r\\n              <div class=\\\"ui-g-12\\\">\\r\\n                      <div class=\\\"ui-g-4\\\">\\r\\n                          <label for=\\\"vin\\\">Paid date</label>\\r\\n                      </div>\\r\\n                      <div class=\\\"ui-g-8\\\">\\r\\n                            {{paymentDetails.updatedAt | date:'medium'}}\\r\\n                      </div>\\r\\n                  </div>\\r\\n  </div>\\r\\n</div>\\r\\n<p-button label=\\\"Pay\\\" (onClick)=\\\"onBuyProduct()\\\" *ngIf=\\\"paymentDetails.plan_type == '0'\\\"></p-button>\\r\\n</p-card>\\r\\n</div>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ProductBuyComponent } from './product-buy.component';\n\nconst routes: Routes = [\n  {path:'',component:ProductBuyComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ProductBuyRoutingModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9wcm9kdWN0LWJ1eS9wcm9kdWN0LWJ1eS5jb21wb25lbnQuc2FzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { ProductPayment } from 'src/app/model/product_payment.model';\nimport { MessageService } from 'primeng/api';\nimport { StripeCheckoutLoader, StripeCheckoutHandler } from 'ng-stripe-checkout';\n\nimport * as moment from 'moment';\nimport { AuthService } from 'src/app/shared/auth.service';\ndeclare var paypal:any;\n\n@Component({\n  selector: 'app-product-buy',\n  templateUrl: './product-buy.component.html',\n  styleUrls: ['./product-buy.component.sass']\n})\nexport class ProductBuyComponent implements OnInit {\n\n  addScript:boolean =false;\n  futureMonthEnd = moment().add(1, 'M');\n  private stripeCheckoutHandler: StripeCheckoutHandler;\n  paymentDetails:any = []\n  paypalConfig = {\n    env:\"sandbox\",\n    client:{\n      sandbox:\"AYvoUXz1SzxSJvZbpGkgofTKprB_Iz3gY06RgddW8-dmFXcBPdF8HZVe4aFuVuMF0DWLy-df3AjSWN_6\",\n      production:\"EEVz2dWLaEOmKwOdOEdHGLsHJoJONWZkX_b89zPnLv-QwCI1AD_EJYm3bTBiqqVpalvnKuzDci74pimG\"\n    },\n    commit:true,\n    payment:(data,actions) =>{\n      return actions.payment.create({\n        payment:{\n          transactions: [\n            {amount:{total:11,currency:'USD'}}\n          ]\n        }\n      })\n    },\n    onAuthorize:(data,actions) =>{\n      return actions.payment.execute().then((payment)=>{\n        console.log('payment',payment);\n      })\n    }\n  }\n  constructor(private messageService: MessageService,private stripeCheckoutLoader: StripeCheckoutLoader, private auth: AuthService) { }\n\n  ngOnInit() {\n    this.getPaymentDetails(this.auth.getUserCompanyId())\n  }\n\n  getPaymentDetails(company_details_id){\n    this.auth.getPaymentDetails(company_details_id)\n    .subscribe((data:any)=>{  \n      console.log('data',data);  \n      this.paymentDetails = data[0]\n    },\n    error =>{   \n      console.log('er',error);\n      this.messageService.add({severity:'error', summary:'Opps!', detail:'Sothing went wrong!'});\n    })\n  }\n\n  ngAfterViewChecked(): void {\n    //Called after every check of the component's view. Applies to components only.\n    //Add 'implements AfterViewChecked' to the class.\n    if(!this.addScript){\n      this.addPaypalScript().then(()=>{\n        paypal.Button.render(this.paypalConfig,'#paypal-checkout-btn')\n      })\n    }\n  }\n\n  public ngAfterViewInit() {\n    this.stripeCheckoutLoader.createHandler({\n        key: 'pk_test_F63TkaKKCwSbIPGbjcbzWuJT00PfCXqOJj',\n        token: (token) => {\n            // Do something with the token...\n            console.log('Payment successful!', token);\n        }\n    }).then((handler: StripeCheckoutHandler) => {\n        this.stripeCheckoutHandler = handler;\n    });\n}\n\n\n  addPaypalScript(){\n    this.addScript = true;\n    return new Promise((resolve,reject)=>{\n      let scriptTagElement = document.createElement('script');\n      scriptTagElement.src = \"https://www.paypalobjects.com/api/checkout.js\";\n      scriptTagElement.onload = resolve;\n      document.body.appendChild(scriptTagElement);\n    })\n    \n  }\n\n  \npublic onBuyProduct() {\n  this.stripeCheckoutHandler.open({\n    amount: 1500000,\n    currency: 'INR',\n  }).then((token) => {\n    // Do something with the token...\n    console.log('Payment successful!', token);\n    let payData:ProductPayment = {\n        plan_type : 1,\n        payment_amount : 15000,\n        currency: 'INR',\n        company_details_id: this.auth.getUserData().company_details_id,\n        payment_details: token,\n        expiry_date: '',\n        status: 1\n    }\n    this.onRegisterPayment(payData)\n  }).catch((err) => {\n    // Payment failed or was canceled by user...\n    if (err !== 'stripe_closed') {\n        throw err;\n    }\n    \n  //   let payData:ProductPayment = {\n  //     plan_type : 1,\n  //     payment_amount : 15000,\n  //     currency: 'INR',\n  //     company_details_id: this.auth.getUserData().company_details_id,\n  //     payment_details: err,\n  //     expiry_date: this.futureMonthEnd,\n  //     status: 2\n  // }\n  // this.onRegisterPayment(payData)\n});\n}\n\n\nonRegisterPayment(cdata){\n  this.messageService.clear();\n  this.auth.onRegisterPayment(cdata)\n  .subscribe((data:any)=>{  \n    console.log('data',data);  \n  },\n  error =>{   \n    console.log('er',error);\n    this.messageService.add({severity:'error', summary:'Opps!', detail:'Sothing went wrong!'});\n  })\n }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ProductBuyRoutingModule } from './product-buy-routing.module';\nimport { ProductBuyComponent } from './product-buy.component';\nimport {CardModule} from 'primeng/card';\nimport { ButtonModule } from 'primeng/button';\nimport { StripeCheckoutModule } from 'ng-stripe-checkout';\n\n\n@NgModule({\n  declarations: [ProductBuyComponent],\n  imports: [\n    CommonModule,\n    ProductBuyRoutingModule,\n    ButtonModule,\n    StripeCheckoutModule,\n    CardModule\n  ]\n})\nexport class ProductBuyModule { }\n"],"sourceRoot":"webpack:///"}