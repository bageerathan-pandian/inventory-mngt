{"version":3,"sources":["./src/app/component/change-password/change-password.component.html","./src/app/component/change-password/change-password-routing.module.ts","./src/app/component/change-password/change-password.component.scss","./src/app/component/change-password/change-password.component.ts","./src/app/component/change-password/change-password.module.ts"],"names":[],"mappings":"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","file":"component-change-password-change-password-module-es2015.js","sourcesContent":["export default \"<!-- <pre>{{ auth.getUserData() | json }}</pre> -->\\n<p-toast position=\\\"top-right\\\"></p-toast>\\n\\n        <p-breadcrumb [model]=\\\"bradCrum\\\"></p-breadcrumb>\\n        <div style=\\\"margin-top: 15px;\\\">\\n\\n<p-messages class=\\\"ui-g-12\\\" styleClass=\\\"loagin-wrapper\\\" ></p-messages>\\n<p-card  class=\\\"ui-g-12\\\">\\n    <form [formGroup]=\\\"changePasswordForm\\\" > \\n    <div class=\\\"ui-g ui-fluid\\\" >\\n            <div class=\\\"ui-g-12\\\">\\n                <div class=\\\"ui-g-4\\\">\\n                    <label for=\\\"user_pwd\\\">Old Password</label>\\n                </div>\\n                <div class=\\\"ui-g-8\\\">\\n                    <input type=\\\"password\\\" id=\\\"user_pwd\\\" pPassword formControlName=\\\"user_pwd\\\" />\\n                </div>\\n            </div>\\n            <div class=\\\"ui-g-12\\\">\\n                <div class=\\\"ui-g-4\\\">\\n                    <label for=\\\"new_user_pwd\\\">New Password</label>\\n                </div>\\n                <div class=\\\"ui-g-8\\\">\\n                    <input type=\\\"password\\\" id=\\\"new_user_pwd\\\" pPassword formControlName=\\\"new_user_pwd\\\"  nopasswordmatch (focusout)=\\\"passwordMatch()\\\"/>\\n                </div>\\n            </div> <div class=\\\"ui-g-12\\\">\\n                <div class=\\\"ui-g-4\\\">\\n                    <label for=\\\"year\\\">Confirm Password</label>\\n                </div>\\n                <div class=\\\"ui-g-8\\\">\\n                    <input type=\\\"password\\\" pPassword formControlName=\\\"cnfirm_user_pwd\\\"  nopasswordmatch (focusout)=\\\"passwordMatch()\\\"/>\\n                </div>\\n            </div>\\n    </div>\\n    <p-footer>\\n        <div class=\\\"ui-dialog-buttonpane ui-helper-clearfix\\\">\\n            <!-- <button type=\\\"button\\\" pButton icon=\\\"fa fa-close\\\" (click)=\\\"delete(car)\\\" label=\\\"Delete\\\"></button> -->\\n            <button type=\\\"button\\\" pButton  icon=\\\"actionLoding ? 'pi pi-save' : 'pi pi-spin pi-spinner'\\\" class=\\\"ui-button-success\\\" (click)=\\\"updatePassword()\\\" label=\\\"Change Password\\\"></button>\\n        </div>\\n    </p-footer>\\n    </form>\\n</p-card>\\n        </div>\\n<p-confirmDialog header=\\\"Confirmation\\\" icon=\\\"pi pi-exclamation-triangle\\\" #cd>\\n<p-footer>\\n        <button pButton type=\\\"button\\\" label=\\\"Yes\\\" class=\\\"ui-button-success\\\" (click)=\\\"cd.accept()\\\"></button>        \\n        <button pButton type=\\\"button\\\" label=\\\"No\\\" class=\\\"ui-button-danger\\\" (click)=\\\"cd.reject()\\\"></button>\\n    </p-footer>\\n</p-confirmDialog>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ChangePasswordComponent } from './change-password.component';\n\n\nconst routes: Routes = [\n  {path:'',component:ChangePasswordComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ChangePasswordRoutingModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudC9jaGFuZ2UtcGFzc3dvcmQvY2hhbmdlLXBhc3N3b3JkLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { AuthService } from 'src/app/shared/auth.service';\nimport { User } from 'src/app/model/user.model';\nimport { MessageService, ConfirmationService, MenuItem } from 'primeng/api';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.component.html',\n  styleUrls: ['./change-password.component.scss'],\n  providers:[ConfirmationService]\n})\nexport class ChangePasswordComponent implements OnInit {\n\n  changePasswordForm: FormGroup\n  displayDialog: boolean\n  private bradCrum: MenuItem[];\n  constructor(private auth: AuthService, private _fb: FormBuilder, private messageService: MessageService,private router: Router, private confirmationService: ConfirmationService) {\n    \n   \n    this.changePasswordForm = this._fb.group({\n      _id: [this.auth.getUserData()._id],\n      user_pwd: ['',Validators.required],\n      new_user_pwd: ['',Validators.required],\n      cnfirm_user_pwd: ['',Validators.required],\n      company_details_id:[this.auth.getUserData().company_details_id._id,Validators.required]\n    })\n  }\n\n  ngOnInit() {\n    this.bradCrum = [\n      {label:'',icon: 'pi pi-home',command: (event) => {\n        this.router.navigate(['/dashboard'])}\n      },\n      {\n        label: \"Change Password\",\n        command: event => {\n          this.router.navigate([\"/change-password\"]);\n        }\n      }\n    ];\n  }\n\n  public checkValidity(): void {\n    Object.keys(this.changePasswordForm.controls).forEach((key) => {\n        this.changePasswordForm.controls[key].markAsDirty();\n    });\n  }\n \n  checkOldPassword(){\n    this.messageService.clear();\n    if(this.changePasswordForm.value.user_pwd && (this.auth.getUserData().user_pwd != this.changePasswordForm.value.user_pwd)){\n        this.messageService.add({severity:'warn', summary:'Warning!', detail:'Old password is wrong!'});\n        this.changePasswordForm.controls['user_pwd'].setValue('');\n       }\n  }\n\n  passwordMatch() {\n    this.messageService.clear();\n    let newPassword = this.changePasswordForm.value.new_user_pwd;\n    let confirmPassword = this.changePasswordForm.value.cnfirm_user_pwd;\n    if (confirmPassword != '') {\n      if (newPassword != confirmPassword) {\n        console.log('not eq');\n        console.log(this.changePasswordForm);\n        this.changePasswordForm.controls['cnfirm_user_pwd'].setErrors({ 'nopasswordmatch': true })\n        this.changePasswordForm.controls['cnfirm_user_pwd'].markAsDirty();\n        this.messageService.add({severity:'warn', summary:'Warning!', detail:'Password not same'});\n      } else {\n        console.log('eq');        \n        this.changePasswordForm.controls['cnfirm_user_pwd'].setErrors({ 'nopasswordmatch': null })\n        this.changePasswordForm.controls['cnfirm_user_pwd'].updateValueAndValidity();\n      }\n    } else {\n    }\n\n  }\n\n  confirm() {\n    this.confirmationService.confirm({\n        message: 'You will be logged out shortly for security perposes. Please remember your new password before logged out.',\n        accept: () => {\n            //Actual logic to perform a confirmation\n            this.doUpdatePassword()\n        }\n    });\n}\n\n  updatePassword(){\n    console.log(this.changePasswordForm)\n    if(this.changePasswordForm.invalid){\n      this.checkValidity();\n      this.passwordMatch();\n      return false;\n    }\n    // this.submitAttempt = false;\n    this.confirm();\n  }\n\n  doUpdatePassword(){\n    this.auth.changePassword(this.changePasswordForm.value)\n    .subscribe((data:any)=>{\n    },\n    error => {\n    })\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ChangePasswordRoutingModule } from './change-password-routing.module';\nimport { ChangePasswordComponent } from './change-password.component';\nimport { CardModule } from 'primeng/card';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { TableModule } from 'primeng/table';\nimport { ButtonModule } from 'primeng/button';\nimport { DialogModule } from 'primeng/dialog';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { PasswordModule } from 'primeng/password';\nimport { BreadcrumbModule } from 'primeng/breadcrumb';\nimport { ConfirmDialogModule } from 'primeng/confirmdialog';\nimport { ToastModule } from 'primeng/toast';\nimport { InputSwitchModule } from 'primeng/inputswitch';\nimport { ChartModule } from 'primeng/chart';\nimport { GooglePlaceModule } from 'ngx-google-places-autocomplete';\nimport { InputMaskModule } from 'primeng/inputmask';\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\nimport { ImageCropperModule } from 'ngx-image-cropper';\nimport { FileUploadModule } from 'primeng/fileupload';\n\n\n@NgModule({\n  declarations: [ChangePasswordComponent],\n  imports: [\n    CommonModule,\n    ChangePasswordRoutingModule,   \n    CardModule,\n    FormsModule,\n    InputTextModule,\n    TableModule,\n    ButtonModule,\n    DialogModule,\n    DropdownModule,\n    PasswordModule,\n    BreadcrumbModule,\n    ConfirmDialogModule,\n    ToastModule,\n    InputSwitchModule,\n    ChartModule,\n    GooglePlaceModule,\n    InputMaskModule,\n    ReactiveFormsModule,\n    ProgressSpinnerModule,\n    ImageCropperModule,\n    FileUploadModule\n  ]\n})\nexport class ChangePasswordModule { }\n"],"sourceRoot":"webpack:///"}