function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{CcaC:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var r=i("IheW"),o=i("AytR"),a=i("HDdC"),n=i("gFX4"),s=i("0hB7"),h=i("8Y7J"),p=function(){var t=function(){function t(t,e){this.httpClient=t,this.sessionService=e,this.socket=n(o.a.api_url)}var e=t.prototype;return e.getUsers=function(){return this.httpClient.get(o.a.api_url+"/api/users")},e.getUser=function(){return this.httpClient.get(o.a.api_url+"/api/users/"+this.sessionService.getItem("_id"))},e.getUsersByCompany=function(){return this.httpClient.get(o.a.api_url+"/api/users/get-by-company/"+this.sessionService.getItem("company_id"))},e.addUser=function(t){var e=JSON.stringify(t);console.log("body",e);var i=new r.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.post(o.a.api_url+"/api/users",e,{headers:i})},e.updateUser=function(t){var e=JSON.stringify(t);console.log("body",e);var i=new r.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.put(o.a.api_url+"/api/users/"+t._id,e,{headers:i})},e.deleteUser=function(t){return this.httpClient.delete(o.a.api_url+"/api/users/"+t)},e.onCheckEmailExist=function(t){return this.httpClient.get(o.a.api_url+"/api/users/check-email-exist/"+t)},e.addUserSocktet=function(){var t=this;return new a.a(function(e){return t.socket=n(o.a.api_url),t.socket.on("add",function(t){e.next(t)}),function(){t.socket.disconnect()}})},e.deleteUserSocktet=function(){var t=this;return new a.a(function(e){return t.socket=n(o.a.api_url),t.socket.on("delete",function(t){e.next(t)}),function(){t.socket.disconnect()}})},e.updateUserSocktet=function(){var t=this;return new a.a(function(e){return t.socket=n(o.a.api_url),t.socket.on("update",function(t){e.next(t)}),function(){t.socket.disconnect()}})},e.statusUpdateUserSocktet=function(){var t=this;return new a.a(function(e){return t.socket=n(o.a.api_url),t.socket.on("status",function(t){e.next(t)}),function(){t.socket.disconnect()}})},t}();return t.ngInjectableDef=h["\u0275\u0275defineInjectable"]({factory:function(){return new t(h["\u0275\u0275inject"](r.HttpClient),h["\u0275\u0275inject"](s.a))},token:t,providedIn:"root"}),t}()},DX9g:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i("AytR"),o=i("8Y7J"),a=i("IheW"),n=function(){var t=function(){function t(t){this.httpClient=t}var e=t.prototype;return e.imageUpload=function(t){var e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(r.a.api_url+"/api/image-upload",e)},e.profileImageUpload=function(t){var e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(r.a.api_url+"/api/image-upload/profile",e)},e.companyLogoUpload=function(t){var e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(r.a.api_url+"/api/image-upload/logo",e)},t}();return t.ngInjectableDef=o["\u0275\u0275defineInjectable"]({factory:function(){return new t(o["\u0275\u0275inject"](a.HttpClient))},token:t,providedIn:"root"}),t}()},NqMA:function(t,e,i){"use strict";var r=this&&this.__decorate||function(t,e,i,r){var o,a=arguments.length,n=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(n=(a<3?o(n):a>3?o(e,i,n):o(e,i))||n);return a>3&&n&&Object.defineProperty(e,i,n),n},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=i("8Y7J"),n=i("SVse"),s=i("sdDj"),h=function(){function t(t,e){this.el=t,this.zone=e,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(t.prototype,"showPassword",{set:function(t){this.el.nativeElement.type=t?"text":"password"},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){this.updateFilledState()},t.prototype.onInput=function(t){this.updateFilledState()},t.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},t.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=s.DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},t.prototype.onFocus=function(t){var e=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++s.DomHandler.zindex),this.zone.runOutsideAngular(function(){setTimeout(function(){s.DomHandler.addClass(e.panel,"ui-password-panel-visible"),s.DomHandler.removeClass(e.panel,"ui-password-panel-hidden")},1),s.DomHandler.absolutePosition(e.panel,e.el.nativeElement)}))},t.prototype.onBlur=function(t){var e=this;this.feedback&&(s.DomHandler.addClass(this.panel,"ui-password-panel-hidden"),s.DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular(function(){setTimeout(function(){e.ngOnDestroy()},150)}))},t.prototype.onKeyup=function(t){if(this.feedback){var e=t.target.value,i=null,r=null;if(0===e.length)i=this.promptLabel,r="0px 0px";else{var o=this.testStrength(e);o<30?(i=this.weakLabel,r="0px -10px"):o>=30&&o<80?(i=this.mediumLabel,r="0px -20px"):o>=80&&(i=this.strongLabel,r="0px -30px")}this.meter.style.backgroundPosition=r,this.info.textContent=i}},t.prototype.testStrength=function(t){var e,i=0;return e=t.match("[0-9]"),i+=25*this.normalize(e?e.length:.25,1),e=t.match("[a-zA-Z]"),i+=10*this.normalize(e?e.length:.5,3),e=t.match("[!@#$%^&*?_~.,;=]"),i+=35*this.normalize(e?e.length:1/6,1),e=t.match("[A-Z]"),i+=30*this.normalize(e?e.length:1/6,1),(i*=t.length/8)>100?100:i},t.prototype.normalize=function(t,e){return t-e<=0?t/e:1+t/(t+e/4)*.5},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},r([a.Input(),o("design:type",String)],t.prototype,"promptLabel",void 0),r([a.Input(),o("design:type",String)],t.prototype,"weakLabel",void 0),r([a.Input(),o("design:type",String)],t.prototype,"mediumLabel",void 0),r([a.Input(),o("design:type",String)],t.prototype,"strongLabel",void 0),r([a.Input(),o("design:type",Boolean)],t.prototype,"feedback",void 0),r([a.Input(),o("design:type",Boolean),o("design:paramtypes",[Boolean])],t.prototype,"showPassword",null),r([a.HostListener("input",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],t.prototype,"onInput",null),r([a.HostListener("focus",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],t.prototype,"onFocus",null),r([a.HostListener("blur",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],t.prototype,"onBlur",null),r([a.HostListener("keyup",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],t.prototype,"onKeyup",null),r([a.Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}}),o("design:paramtypes",[a.ElementRef,a.NgZone])],t)}();e.Password=h;var p=r([a.NgModule({imports:[n.CommonModule],exports:[h],declarations:[h]})],function(){});e.PasswordModule=p},"YD+O":function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n});var r=i("8Y7J");function o(t,e){return new Promise(function(i,r){var o=new Image;o.onload=function(){var t=o.width,a=o.height,n=document.createElement("canvas"),s=n.getContext("2d");s?(4<e&&e<9?(n.width=a,n.height=t):(n.width=t,n.height=a),function(t,i,r,o){switch(e){case 2:t.transform(-1,0,0,1,r,0);break;case 3:t.transform(-1,0,0,-1,r,o);break;case 4:t.transform(1,0,0,-1,0,o);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,o,0);break;case 7:t.transform(0,-1,-1,0,o,r);break;case 8:t.transform(0,-1,1,0,0,r)}}(s,0,t,a),s.drawImage(o,0,0),i(n.toDataURL())):r(new Error("No context"))},o.src=t})}var a=function(){function t(t,e,i){this.sanitizer=t,this.cd=e,this.zone=i,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="base64",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.imageCropped=new r.EventEmitter,this.startCropImage=new r.EventEmitter,this.imageLoaded=new r.EventEmitter,this.cropperReady=new r.EventEmitter,this.loadImageFailed=new r.EventEmitter,this.initCropper()}var e=t.prototype;return e.ngOnChanges=function(t){t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()},e.initCropper=function(){this.imageVisible=!1,this.originalImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4},e.loadImageFile=function(t){var e=this,i=new FileReader;i.onload=function(i){e.isValidImageType(t.type)?e.checkExifAndLoadBase64Image(i.target.result):e.loadImageFailed.emit()},i.readAsDataURL(t)},e.isValidImageType=function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)},e.checkExifAndLoadBase64Image=function(t){var e=this;(function(t){try{var e=function(e){var i=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=e.charCodeAt(o);return r.buffer}(t));if(65496!=i.getUint16(0,!1))return-2;for(var r=i.byteLength,o=2;o<r;){if(i.getUint16(o+2,!1)<=8)return-1;var a=i.getUint16(o,!1);if(o+=2,65505==a){if(1165519206!=i.getUint32(o+=2,!1))return-1;var n=18761==i.getUint16(o+=6,!1);o+=i.getUint32(o+4,n);var s=i.getUint16(o,n);o+=2;for(var h=0;h<s;h++)if(274==i.getUint16(o+12*h,n))return i.getUint16(o+12*h+8,n)}else{if(65280!=(65280&a))break;o+=i.getUint16(o,!1)}}return-1}();return e>1?o(t,e):Promise.resolve(t)}catch(i){return Promise.reject(i)}})(t).then(function(t){return e.fitImageToAspectRatio(t)}).then(function(t){return e.loadBase64Image(t)}).catch(function(){return e.loadImageFailed.emit()})},e.fitImageToAspectRatio=function(t){return this.containWithinAspectRatio?(e=t,i=this.aspectRatio,new Promise(function(t,r){var o=new Image;o.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");if(a){var n=o.width/i;e.width=Math.max(o.width,o.height*i),e.height=Math.max(o.height,n),a.drawImage(o,(e.width-o.width)/2,(e.height-o.height)/2),t(e.toDataURL())}else r(new Error("No context"))},o.src=e})):Promise.resolve(t);var e,i},e.loadBase64Image=function(t){var e=this;this.originalBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.originalImage=new Image,this.originalImage.onload=function(){e.originalSize.width=e.originalImage.width,e.originalSize.height=e.originalImage.height,e.cd.markForCheck()},this.originalImage.src=t},e.imageLoadedInView=function(){var t=this;null!=this.originalImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(function(){return t.checkImageMaxSizeRecursively()}))},e.checkImageMaxSizeRecursively=function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(function(){t.checkImageMaxSizeRecursively()},50))},e.onResize=function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()},e.rotateLeft=function(){this.transformBase64(8)},e.rotateRight=function(){this.transformBase64(6)},e.flipHorizontal=function(){this.transformBase64(2)},e.flipVertical=function(){this.transformBase64(4)},e.transformBase64=function(t){var e=this;this.originalBase64&&o(this.originalBase64,t).then(function(t){return e.fitImageToAspectRatio(t)}).then(function(t){return e.loadBase64Image(t)})},e.resizeCropperPosition=function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)},e.resetCropperPosition=function(){var t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0},e.startMove=function(t,e,i){void 0===i&&(i=null),t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)},e.moveImg=function(t){this.moveStart.active&&(t.stopPropagation(),t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())},e.setMaxSize=function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}},e.setCropperScaledMinSize=function(){this.originalImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)},e.setCropperScaledMinWidth=function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.originalImage.width*this.maxSize.width):20},e.setCropperScaledMinHeight=function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.originalImage.height*this.maxSize.height):20},e.checkCropperPosition=function(t){void 0===t&&(t=!1),this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)},e.moveStop=function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())},e.move=function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i},e.resize=function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()},e.checkAspectRatio=function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}},e.doAutoCrop=function(){this.autoCrop&&this.crop()},e.crop=function(t){if(void 0===t&&(t=this.outputType),this.sourceImage.nativeElement&&null!=this.originalImage){this.startCropImage.emit();var e=this.getImagePosition(),i=e.x2-e.x1,r=e.y2-e.y1,o=document.createElement("canvas");o.width=i,o.height=r;var a=o.getContext("2d");if(a){null!=this.backgroundColor&&(a.fillStyle=this.backgroundColor,a.fillRect(0,0,i,r)),a.drawImage(this.originalImage,e.x1,e.y1,i,r,0,0,i,r);var n={width:i,height:r,imagePosition:e,cropperPosition:Object.assign({},this.cropper)},s=this.getResizeRatio(i,r);return 1!==s&&(n.width=Math.round(i*s),n.height=this.maintainAspectRatio?Math.round(n.width/this.aspectRatio):Math.round(r*s),function(t,e,i,r){void 0===r&&(r=!0);var o=t.width,a=t.height,n=o/(e=Math.round(e)),s=a/(i=Math.round(i)),h=Math.ceil(n/2),p=Math.ceil(s/2),c=t.getContext("2d");if(c){for(var l=c.getImageData(0,0,o,a),u=c.createImageData(e,i),d=l.data,m=u.data,g=0;g<i;g++)for(var f=0;f<e;f++){var y=4*(f+g*e),v=g*s,x=0,S=0,b=0,w=0,M=0,C=0,I=0,R=Math.floor(f*n),k=Math.floor(g*s),z=Math.ceil((f+1)*n),A=Math.ceil((g+1)*s);z=Math.min(z,o),A=Math.min(A,a);for(var E=k;E<A;E++)for(var H=Math.abs(v-E)/p,D=f*n,P=H*H,W=R;W<z;W++){var U=Math.abs(D-W)/h,L=Math.sqrt(P+U*U);if(!(L>=1)){var T=4*(W+E*o);I+=(x=2*L*L*L-3*L*L+1)*d[T+3],b+=x,d[T+3]<255&&(x=x*d[T+3]/250),w+=x*d[T],M+=x*d[T+1],C+=x*d[T+2],S+=x}}m[y]=w/S,m[y+1]=M/S,m[y+2]=C/S,m[y+3]=I/b}r?(t.width=e,t.height=i):c.clearRect(0,0,o,a),c.putImageData(u,0,0)}}(o,n.width,n.height)),this.cropToOutputType(t,o,n)}}return null},e.getImagePosition=function(){var t=this.originalSize.width/this.sourceImage.nativeElement.offsetWidth;return{x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.min(Math.round(this.cropper.x2*t),this.originalSize.width),y2:Math.min(Math.round(this.cropper.y2*t),this.originalSize.height)}},e.cropToOutputType=function(t,e,i){var r=this;switch(t){case"file":return this.cropToFile(e).then(function(t){return i.file=t,r.imageCropped.emit(i),i});case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then(function(t){return i.file=t,r.imageCropped.emit(i),i});default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}},e.cropToBase64=function(t){return t.toDataURL("image/"+this.format,this.getQuality())},e.cropToFile=function(t){var e=this;return new Promise(function(i){t.toBlob(function(t){return e.zone.run(function(){return i(t)})},"image/"+e.format,e.getQuality())})},e.getQuality=function(){return Math.min(1,Math.max(0,this.imageQuality/100))},e.getResizeRatio=function(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1},e.getClientX=function(t){return t.touches&&t.touches[0]&&t.touches[0].clientX||t.clientX},e.getClientY=function(t){return t.touches&&t.touches[0]&&t.touches[0].clientY||t.clientY},_createClass(t,[{key:"imageChangedEvent",set:function(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}},{key:"imageBase64",set:function(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}},{key:"imageFile",set:function(t){this.initCropper(),t&&this.loadImageFile(t)}}]),t}(),n=function(){}},eiLQ:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return h});var r=i("8Y7J"),o=(i("oz/p"),i("SVse")),a=i("Fa87"),n=i("s7LF"),s=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function h(t){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{inputViewChild:0}),(t()(),r["\u0275eld"](1,0,[[1,0],["input",1]],null,5,"input",[["pInputText",""]],[[1,"id",0],[1,"type",0],[1,"name",0],[1,"placeholder",0],[1,"title",0],[1,"size",0],[1,"autocomplete",0],[1,"maxlength",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-required",0],[8,"disabled",0],[8,"readOnly",0],[1,"required",0],[1,"autofocus",0],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"focus"],[null,"blur"],[null,"keydown"],[null,"keypress"],[null,"input"],[null,"paste"]],function(t,e,i){var o=!0,a=t.component;return"input"===e&&(o=!1!==r["\u0275nov"](t,6).onInput(i)&&o),"focus"===e&&(o=!1!==a.onInputFocus(i)&&o),"blur"===e&&(o=!1!==a.onInputBlur(i)&&o),"keydown"===e&&(o=!1!==a.onKeyDown(i)&&o),"keypress"===e&&(o=!1!==a.onKeyPress(i)&&o),"input"===e&&(o=!1!==a.onInputChange(i)&&o),"paste"===e&&(o=!1!==a.handleInputChange(i)&&o),o},null,null)),r["\u0275prd"](512,null,o["\u0275NgClassImpl"],o["\u0275NgClassR2Impl"],[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2]),r["\u0275did"](3,278528,null,0,o.NgClass,[o["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),r["\u0275prd"](512,null,o["\u0275NgStyleImpl"],o["\u0275NgStyleR2Impl"],[r.ElementRef,r.KeyValueDiffers,r.Renderer2]),r["\u0275did"](5,278528,null,0,o.NgStyle,[o["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),r["\u0275did"](6,278528,null,0,a.InputText,[r.ElementRef,[2,n.NgModel]],null,null)],function(t,e){var i=e.component;t(e,3,0,i.styleClass),t(e,5,0,i.style),t(e,6,0)},function(t,e){var i=e.component;t(e,1,1,[i.inputId,i.type,i.name,i.placeholder,i.title,i.size,i.autocomplete,i.maxlength,i.tabindex,i.ariaLabel,i.ariaRequired,i.disabled,i.readonly,i.required,i.autoFocus,!0,!0,!0,!0,r["\u0275nov"](e,6).filled])})}}}]);