(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{CcaC:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var s=i("IheW"),r=i("AytR"),o=i("HDdC"),a=i("gFX4"),n=i("0hB7"),h=i("8Y7J");let p=(()=>{class t{constructor(t,e){this.httpClient=t,this.sessionService=e,this.socket=a(r.a.api_url)}getUsers(){return this.httpClient.get(r.a.api_url+"/api/users")}getUser(){return this.httpClient.get(r.a.api_url+"/api/users/"+this.sessionService.getItem("_id"))}getUsersByCompany(){return this.httpClient.get(r.a.api_url+"/api/users/get-by-company/"+this.sessionService.getItem("company_id"))}addUser(t){var e=JSON.stringify(t);console.log("body",e);var i=new s.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.post(r.a.api_url+"/api/users",e,{headers:i})}updateUser(t){var e=JSON.stringify(t);console.log("body",e);var i=new s.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.put(r.a.api_url+"/api/users/"+t._id,e,{headers:i})}deleteUser(t){return this.httpClient.delete(r.a.api_url+"/api/users/"+t)}onCheckEmailExist(t){return this.httpClient.get(r.a.api_url+"/api/users/check-email-exist/"+t)}addUserSocktet(){return new o.a(t=>(this.socket=a(r.a.api_url),this.socket.on("add",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}deleteUserSocktet(){return new o.a(t=>(this.socket=a(r.a.api_url),this.socket.on("delete",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}updateUserSocktet(){return new o.a(t=>(this.socket=a(r.a.api_url),this.socket.on("update",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}statusUpdateUserSocktet(){return new o.a(t=>(this.socket=a(r.a.api_url),this.socket.on("status",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}}return t.ngInjectableDef=h["\u0275\u0275defineInjectable"]({factory:function(){return new t(h["\u0275\u0275inject"](s.HttpClient),h["\u0275\u0275inject"](n.a))},token:t,providedIn:"root"}),t})()},DX9g:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("AytR"),r=i("8Y7J"),o=i("IheW");let a=(()=>{class t{constructor(t){this.httpClient=t}imageUpload(t){let e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(s.a.api_url+"/api/image-upload",e)}profileImageUpload(t){let e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(s.a.api_url+"/api/image-upload/profile",e)}companyLogoUpload(t){let e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(s.a.api_url+"/api/image-upload/logo",e)}}return t.ngInjectableDef=r["\u0275\u0275defineInjectable"]({factory:function(){return new t(r["\u0275\u0275inject"](o.HttpClient))},token:t,providedIn:"root"}),t})()},NqMA:function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,a=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(r=t[n])&&(a=(o<3?r(a):o>3?r(e,i,a):r(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var o=i("8Y7J"),a=i("SVse"),n=i("sdDj"),h=function(){function t(t,e){this.el=t,this.zone=e,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(t.prototype,"showPassword",{set:function(t){this.el.nativeElement.type=t?"text":"password"},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){this.updateFilledState()},t.prototype.onInput=function(t){this.updateFilledState()},t.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},t.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=n.DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},t.prototype.onFocus=function(t){var e=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++n.DomHandler.zindex),this.zone.runOutsideAngular((function(){setTimeout((function(){n.DomHandler.addClass(e.panel,"ui-password-panel-visible"),n.DomHandler.removeClass(e.panel,"ui-password-panel-hidden")}),1),n.DomHandler.absolutePosition(e.panel,e.el.nativeElement)})))},t.prototype.onBlur=function(t){var e=this;this.feedback&&(n.DomHandler.addClass(this.panel,"ui-password-panel-hidden"),n.DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular((function(){setTimeout((function(){e.ngOnDestroy()}),150)})))},t.prototype.onKeyup=function(t){if(this.feedback){var e=t.target.value,i=null,s=null;if(0===e.length)i=this.promptLabel,s="0px 0px";else{var r=this.testStrength(e);r<30?(i=this.weakLabel,s="0px -10px"):r>=30&&r<80?(i=this.mediumLabel,s="0px -20px"):r>=80&&(i=this.strongLabel,s="0px -30px")}this.meter.style.backgroundPosition=s,this.info.textContent=i}},t.prototype.testStrength=function(t){var e,i=0;return e=t.match("[0-9]"),i+=25*this.normalize(e?e.length:.25,1),e=t.match("[a-zA-Z]"),i+=10*this.normalize(e?e.length:.5,3),e=t.match("[!@#$%^&*?_~.,;=]"),i+=35*this.normalize(e?e.length:1/6,1),e=t.match("[A-Z]"),i+=30*this.normalize(e?e.length:1/6,1),(i*=t.length/8)>100?100:i},t.prototype.normalize=function(t,e){return t-e<=0?t/e:1+t/(t+e/4)*.5},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},s([o.Input(),r("design:type",String)],t.prototype,"promptLabel",void 0),s([o.Input(),r("design:type",String)],t.prototype,"weakLabel",void 0),s([o.Input(),r("design:type",String)],t.prototype,"mediumLabel",void 0),s([o.Input(),r("design:type",String)],t.prototype,"strongLabel",void 0),s([o.Input(),r("design:type",Boolean)],t.prototype,"feedback",void 0),s([o.Input(),r("design:type",Boolean),r("design:paramtypes",[Boolean])],t.prototype,"showPassword",null),s([o.HostListener("input",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onInput",null),s([o.HostListener("focus",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onFocus",null),s([o.HostListener("blur",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onBlur",null),s([o.HostListener("keyup",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onKeyup",null),s([o.Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}}),r("design:paramtypes",[o.ElementRef,o.NgZone])],t)}();e.Password=h;var p=s([o.NgModule({imports:[a.CommonModule],exports:[h],declarations:[h]})],(function(){}));e.PasswordModule=p},"YD+O":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o}));var s=i("8Y7J");class r{constructor(t,e,i){this.sanitizer=t,this.cd=e,this.zone=i,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="base64",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new s.EventEmitter,this.startCropImage=new s.EventEmitter,this.imageLoaded=new s.EventEmitter,this.cropperReady=new s.EventEmitter,this.loadImageFailed=new s.EventEmitter,this.initCropper()}set imageChangedEvent(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}set imageBase64(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}set imageFile(t){this.initCropper(),t&&this.loadImageFile(t)}ngOnChanges(t){this.originalImage&&this.originalImage.complete&&t.containWithinAspectRatio&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()}ngOnInit(){this.stepSize=this.initialStepSize}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.transformations={rotation:0,flipH:!1,flipV:!1},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){const e=new FileReader;e.onload=e=>{this.isValidImageType(t.type)?this.checkExifAndLoadBase64Image(e.target.result):this.loadImageFailed.emit()},e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)}checkExifAndLoadBase64Image(t){return new Promise((e,i)=>{const s=t=>{this.originalImage=null,this.originalBase64=null,i(t)};this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=t,this.transformations=function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=e.charCodeAt(r);return s.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let s=2;for(;s<i;){if(e.getUint16(s+2,!1)<=8)return-1;const t=e.getUint16(s,!1);if(s+=2,65505==t){if(1165519206!=e.getUint32(s+=2,!1))return-1;const t=18761==e.getUint16(s+=6,!1);s+=e.getUint32(s+4,t);const i=e.getUint16(s,t);s+=2;for(let r=0;r<i;r++)if(274==e.getUint16(s+12*r,t))return e.getUint16(s+12*r+8,t)}else{if(65280!=(65280&t))break;s+=e.getUint16(s,!1)}}return-1}(t)),t){case 2:return{rotation:0,flipH:!0,flipV:!1};case 3:return{rotation:2,flipH:!1,flipV:!1};case 4:return{rotation:2,flipH:!0,flipV:!1};case 5:return{rotation:1,flipH:!0,flipV:!1};case 6:return{rotation:1,flipH:!1,flipV:!1};case 7:return{rotation:3,flipH:!0,flipV:!1};case 8:return{rotation:3,flipH:!1,flipV:!1};default:return{rotation:0,flipH:!1,flipV:!1}}}(t),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,this.transformOriginalImage().then(()=>e()).catch(s)},this.originalImage.onerror=s,this.originalImage.src=t})}checkRotation(){this.transformations.rotation<0&&(this.transformations.rotation+=4),this.transformations.rotation=this.transformations.rotation%4}getTransformedSize(){if(this.containWithinAspectRatio){if(this.transformations.rotation%2){const t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}{const t=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,t)}}}return this.transformations.rotation%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}transformImageBase64(){this.checkRotation();const t=this.getTransformedSize(),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");return i.setTransform(this.transformations.flipH?-1:1,0,0,this.transformations.flipV?-1:1,e.width/2,e.height/2),i.rotate(Math.PI*(this.transformations.rotation/2)),i.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),Promise.resolve(e.toDataURL())}setTransformedImage(t){return new Promise((e,i)=>{this.transformedBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,e(),this.cd.markForCheck()},this.transformedImage.onerror=()=>{this.transformedImage=null,i()},this.transformedImage.src=this.transformedBase64})}transformOriginalImage(){return this.originalImage&&this.originalImage.complete?this.transformImageBase64().then(t=>this.setTransformedImage(t)):Promise.reject(new Error("No Image Loaded"))}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>{this.checkImageMaxSizeRecursively()},50))}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}rotateLeft(){return this.transformations.rotation--,this.flipAfterRotate(),this.transformOriginalImage()}rotateRight(){return this.transformations.rotation++,this.flipAfterRotate(),this.transformOriginalImage()}flipAfterRotate(){const t=this.transformations.flipH;this.transformations.flipH=this.transformations.flipV,this.transformations.flipV=t}flipHorizontal(){return this.transformations.flipH=!this.transformations.flipH,this.transformOriginalImage()}flipVertical(){return this.transformations.flipV=!this.transformations.flipV,this.transformOriginalImage()}resetImage(){this.imageBase64=this.originalBase64}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?"resize":"move",i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),s=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(s),this.moveStop()}getPositionForKey(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}startMove(t,e,i=null){t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.outputType){if(this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const e=this.getImagePosition(),i=e.x2-e.x1,s=e.y2-e.y1,r=document.createElement("canvas");r.width=i,r.height=s;const o=r.getContext("2d");if(o){null!=this.backgroundColor&&(o.fillStyle=this.backgroundColor,o.fillRect(0,0,i,s)),o.drawImage(this.transformedImage,e.x1,e.y1,i,s,0,0,i,s);const a={width:i,height:s,imagePosition:e,cropperPosition:Object.assign({},this.cropper),transform:Object.assign({},this.transformations)};this.containWithinAspectRatio&&(a.offsetImagePosition=this.getOffsetImagePosition());const n=this.getResizeRatio(i,s);return 1!==n&&(a.width=Math.round(i*n),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(s*n),function(t,e,i,s=!0){const r=t.width,o=t.height,a=r/(e=Math.round(e)),n=o/(i=Math.round(i)),h=Math.ceil(a/2),p=Math.ceil(n/2),c=t.getContext("2d");if(c){const l=c.getImageData(0,0,r,o),d=c.createImageData(e,i),u=l.data,m=d.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const s=4*(i+t*e),c=t*n;let l=0,d=0,g=0,f=0,y=0,S=0,x=0;const v=Math.floor(i*a),w=Math.floor(t*n);let I=Math.ceil((i+1)*a),b=Math.ceil((t+1)*n);I=Math.min(I,r),b=Math.min(b,o);for(let t=w;t<b;t++){const e=Math.abs(c-t)/p,s=i*a,o=e*e;for(let i=v;i<I;i++){const e=Math.abs(s-i)/h,a=Math.sqrt(o+e*e);if(a>=1)continue;l=2*a*a*a-3*a*a+1;const n=4*(i+t*r);x+=l*u[n+3],g+=l,u[n+3]<255&&(l=l*u[n+3]/250),f+=l*u[n],y+=l*u[n+1],S+=l*u[n+2],d+=l}}m[s]=f/d,m[s+1]=y/d,m[s+2]=S/d,m[s+3]=x/g}s?(t.width=e,t.height=i):c.clearRect(0,0,r,o),c.putImageData(d,0,0)}}(r,a.width,a.height)),this.cropToOutputType(t,r,a)}}return null}getImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}getOffsetImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let e,i;this.transformations.rotation%2?(e=(this.transformedSize.width-this.originalSize.height)/2,i=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,i=(this.transformedSize.height-this.originalSize.height)/2);const s={x1:Math.round(this.cropper.x1*t)-e,y1:Math.round(this.cropper.y1*t)-i,x2:Math.round(this.cropper.x2*t)-e,y2:Math.round(this.cropper.y2*t)-i};return this.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,this.transformedSize.width),s.y2=Math.min(s.y2,this.transformedSize.height)),s}cropToOutputType(t,e,i){switch(t){case"file":return this.cropToFile(e).then(t=>(i.file=t,this.imageCropped.emit(i),i));case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then(t=>(i.file=t,this.imageCropped.emit(i),i));default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}cropToFile(t){return new Promise(e=>{t.toBlob(t=>this.zone.run(()=>e(t)),"image/"+this.format,this.getQuality())})}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}class o{}},bjBz:function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,a=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(r=t[n])&&(a=(o<3?r(a):o>3?r(e,i,a):r(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var o=i("8Y7J"),a=i("SVse"),n=i("s7LF");e.INPUTSWITCH_VALUE_ACCESSOR={provide:n.NG_VALUE_ACCESSOR,useExisting:o.forwardRef((function(){return h})),multi:!0};var h=function(){function t(t){this.cd=t,this.onChange=new o.EventEmitter,this.checked=!1,this.focused=!1,this.onModelChange=function(){},this.onModelTouched=function(){}}return t.prototype.onClick=function(t,e){this.disabled||this.readonly||(this.toggle(t),e.focus())},t.prototype.onInputChange=function(t){this.readonly||this.updateModel(t,t.target.checked)},t.prototype.toggle=function(t){this.updateModel(t,!this.checked)},t.prototype.updateModel=function(t,e){this.checked=e,this.onModelChange(this.checked),this.onChange.emit({originalEvent:t,checked:this.checked})},t.prototype.onFocus=function(t){this.focused=!0},t.prototype.onBlur=function(t){this.focused=!1,this.onModelTouched()},t.prototype.writeValue=function(t){this.checked=t,this.cd.markForCheck()},t.prototype.registerOnChange=function(t){this.onModelChange=t},t.prototype.registerOnTouched=function(t){this.onModelTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},s([o.Input(),r("design:type",Object)],t.prototype,"style",void 0),s([o.Input(),r("design:type",String)],t.prototype,"styleClass",void 0),s([o.Input(),r("design:type",Number)],t.prototype,"tabindex",void 0),s([o.Input(),r("design:type",String)],t.prototype,"inputId",void 0),s([o.Input(),r("design:type",String)],t.prototype,"name",void 0),s([o.Input(),r("design:type",Boolean)],t.prototype,"disabled",void 0),s([o.Input(),r("design:type",Boolean)],t.prototype,"readonly",void 0),s([o.Output(),r("design:type",o.EventEmitter)],t.prototype,"onChange",void 0),s([o.Component({selector:"p-inputSwitch",template:'\n        <div [ngClass]="{\'ui-inputswitch ui-widget\': true, \'ui-inputswitch-checked\': checked, \'ui-state-disabled\': disabled, \'ui-inputswitch-readonly\': readonly, \'ui-inputswitch-focus\': focused}" \n            [ngStyle]="style" [class]="styleClass" (click)="onClick($event, cb)" role="checkbox" [attr.aria-checked]="checked">\n            <div class="ui-helper-hidden-accessible">\n                <input #cb type="checkbox" [attr.id]="inputId" [attr.name]="name" [attr.tabindex]="tabindex" [checked]="checked" (change)="onInputChange($event)"\n                        (focus)="onFocus($event)" (blur)="onBlur($event)" [disabled]="disabled" />\n            </div>\n            <span class="ui-inputswitch-slider"></span>\n        </div>\n    ',providers:[e.INPUTSWITCH_VALUE_ACCESSOR]}),r("design:paramtypes",[o.ChangeDetectorRef])],t)}();e.InputSwitch=h;var p=s([o.NgModule({imports:[a.CommonModule],exports:[h],declarations:[h]})],(function(){}));e.InputSwitchModule=p},eiLQ:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return h}));var s=i("8Y7J"),r=(i("oz/p"),i("SVse")),o=i("Fa87"),a=i("s7LF"),n=s["\u0275crt"]({encapsulation:2,styles:[],data:{}});function h(t){return s["\u0275vid"](0,[s["\u0275qud"](402653184,1,{inputViewChild:0}),(t()(),s["\u0275eld"](1,0,[[1,0],["input",1]],null,5,"input",[["pInputText",""]],[[1,"id",0],[1,"type",0],[1,"name",0],[1,"placeholder",0],[1,"title",0],[1,"size",0],[1,"autocomplete",0],[1,"maxlength",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-required",0],[8,"disabled",0],[8,"readOnly",0],[1,"required",0],[1,"autofocus",0],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"focus"],[null,"blur"],[null,"keydown"],[null,"keypress"],[null,"input"],[null,"paste"]],(function(t,e,i){var r=!0,o=t.component;return"input"===e&&(r=!1!==s["\u0275nov"](t,6).onInput(i)&&r),"focus"===e&&(r=!1!==o.onInputFocus(i)&&r),"blur"===e&&(r=!1!==o.onInputBlur(i)&&r),"keydown"===e&&(r=!1!==o.onKeyDown(i)&&r),"keypress"===e&&(r=!1!==o.onKeyPress(i)&&r),"input"===e&&(r=!1!==o.onInputChange(i)&&r),"paste"===e&&(r=!1!==o.handleInputChange(i)&&r),r}),null,null)),s["\u0275prd"](512,null,r["\u0275NgClassImpl"],r["\u0275NgClassR2Impl"],[s.IterableDiffers,s.KeyValueDiffers,s.ElementRef,s.Renderer2]),s["\u0275did"](3,278528,null,0,r.NgClass,[r["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),s["\u0275prd"](512,null,r["\u0275NgStyleImpl"],r["\u0275NgStyleR2Impl"],[s.ElementRef,s.KeyValueDiffers,s.Renderer2]),s["\u0275did"](5,278528,null,0,r.NgStyle,[r["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),s["\u0275did"](6,278528,null,0,o.InputText,[s.ElementRef,[2,a.NgModel]],null,null)],(function(t,e){var i=e.component;t(e,3,0,i.styleClass),t(e,5,0,i.style),t(e,6,0)}),(function(t,e){var i=e.component;t(e,1,1,[i.inputId,i.type,i.name,i.placeholder,i.title,i.size,i.autocomplete,i.maxlength,i.tabindex,i.ariaLabel,i.ariaRequired,i.disabled,i.readonly,i.required,i.autoFocus,!0,!0,!0,!0,s["\u0275nov"](e,6).filled])}))}}}]);