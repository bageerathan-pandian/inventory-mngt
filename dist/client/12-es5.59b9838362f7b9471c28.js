function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{CcaC:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var r=i("IheW"),a=i("AytR"),o=i("HDdC"),n=i("gFX4"),s=i("0hB7"),h=i("8Y7J"),p=function(){var t=function(){function t(e,i){_classCallCheck(this,t),this.httpClient=e,this.sessionService=i,this.socket=n(a.a.api_url)}return _createClass(t,[{key:"getUsers",value:function(){return this.httpClient.get(a.a.api_url+"/api/users")}},{key:"getUser",value:function(){return this.httpClient.get(a.a.api_url+"/api/users/"+this.sessionService.getItem("_id"))}},{key:"getUsersByCompany",value:function(){return this.httpClient.get(a.a.api_url+"/api/users/get-by-company/"+this.sessionService.getItem("company_id"))}},{key:"addUser",value:function(t){var e=JSON.stringify(t);console.log("body",e);var i=new r.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.post(a.a.api_url+"/api/users",e,{headers:i})}},{key:"updateUser",value:function(t){var e=JSON.stringify(t);console.log("body",e);var i=new r.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.put(a.a.api_url+"/api/users/"+t._id,e,{headers:i})}},{key:"deleteUser",value:function(t){return this.httpClient.delete(a.a.api_url+"/api/users/"+t)}},{key:"onCheckEmailExist",value:function(t){return this.httpClient.get(a.a.api_url+"/api/users/check-email-exist/"+t)}},{key:"addUserSocktet",value:function(){var t=this;return new o.a((function(e){return t.socket=n(a.a.api_url),t.socket.on("add",(function(t){e.next(t)})),function(){t.socket.disconnect()}}))}},{key:"deleteUserSocktet",value:function(){var t=this;return new o.a((function(e){return t.socket=n(a.a.api_url),t.socket.on("delete",(function(t){e.next(t)})),function(){t.socket.disconnect()}}))}},{key:"updateUserSocktet",value:function(){var t=this;return new o.a((function(e){return t.socket=n(a.a.api_url),t.socket.on("update",(function(t){e.next(t)})),function(){t.socket.disconnect()}}))}},{key:"statusUpdateUserSocktet",value:function(){var t=this;return new o.a((function(e){return t.socket=n(a.a.api_url),t.socket.on("status",(function(t){e.next(t)})),function(){t.socket.disconnect()}}))}}]),t}();return t.ngInjectableDef=h["\u0275\u0275defineInjectable"]({factory:function(){return new t(h["\u0275\u0275inject"](r.HttpClient),h["\u0275\u0275inject"](s.a))},token:t,providedIn:"root"}),t}()},DX9g:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var r=i("AytR"),a=i("8Y7J"),o=i("IheW"),n=function(){var t=function(){function t(e){_classCallCheck(this,t),this.httpClient=e}return _createClass(t,[{key:"imageUpload",value:function(t){var e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(r.a.api_url+"/api/image-upload",e)}},{key:"profileImageUpload",value:function(t){var e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(r.a.api_url+"/api/image-upload/profile",e)}},{key:"companyLogoUpload",value:function(t){var e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(r.a.api_url+"/api/image-upload/logo",e)}}]),t}();return t.ngInjectableDef=a["\u0275\u0275defineInjectable"]({factory:function(){return new t(a["\u0275\u0275inject"](o.HttpClient))},token:t,providedIn:"root"}),t}()},NqMA:function(t,e,i){"use strict";var r=this&&this.__decorate||function(t,e,i,r){var a,o=arguments.length,n=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(n=(o<3?a(n):o>3?a(e,i,n):a(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var o=i("8Y7J"),n=i("SVse"),s=i("sdDj"),h=function(){function t(t,e){this.el=t,this.zone=e,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(t.prototype,"showPassword",{set:function(t){this.el.nativeElement.type=t?"text":"password"},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){this.updateFilledState()},t.prototype.onInput=function(t){this.updateFilledState()},t.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},t.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=s.DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},t.prototype.onFocus=function(t){var e=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++s.DomHandler.zindex),this.zone.runOutsideAngular((function(){setTimeout((function(){s.DomHandler.addClass(e.panel,"ui-password-panel-visible"),s.DomHandler.removeClass(e.panel,"ui-password-panel-hidden")}),1),s.DomHandler.absolutePosition(e.panel,e.el.nativeElement)})))},t.prototype.onBlur=function(t){var e=this;this.feedback&&(s.DomHandler.addClass(this.panel,"ui-password-panel-hidden"),s.DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular((function(){setTimeout((function(){e.ngOnDestroy()}),150)})))},t.prototype.onKeyup=function(t){if(this.feedback){var e=t.target.value,i=null,r=null;if(0===e.length)i=this.promptLabel,r="0px 0px";else{var a=this.testStrength(e);a<30?(i=this.weakLabel,r="0px -10px"):a>=30&&a<80?(i=this.mediumLabel,r="0px -20px"):a>=80&&(i=this.strongLabel,r="0px -30px")}this.meter.style.backgroundPosition=r,this.info.textContent=i}},t.prototype.testStrength=function(t){var e,i=0;return e=t.match("[0-9]"),i+=25*this.normalize(e?e.length:.25,1),e=t.match("[a-zA-Z]"),i+=10*this.normalize(e?e.length:.5,3),e=t.match("[!@#$%^&*?_~.,;=]"),i+=35*this.normalize(e?e.length:1/6,1),e=t.match("[A-Z]"),i+=30*this.normalize(e?e.length:1/6,1),(i*=t.length/8)>100?100:i},t.prototype.normalize=function(t,e){return t-e<=0?t/e:1+t/(t+e/4)*.5},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},r([o.Input(),a("design:type",String)],t.prototype,"promptLabel",void 0),r([o.Input(),a("design:type",String)],t.prototype,"weakLabel",void 0),r([o.Input(),a("design:type",String)],t.prototype,"mediumLabel",void 0),r([o.Input(),a("design:type",String)],t.prototype,"strongLabel",void 0),r([o.Input(),a("design:type",Boolean)],t.prototype,"feedback",void 0),r([o.Input(),a("design:type",Boolean),a("design:paramtypes",[Boolean])],t.prototype,"showPassword",null),r([o.HostListener("input",["$event"]),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],t.prototype,"onInput",null),r([o.HostListener("focus",["$event"]),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],t.prototype,"onFocus",null),r([o.HostListener("blur",["$event"]),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],t.prototype,"onBlur",null),r([o.HostListener("keyup",["$event"]),a("design:type",Function),a("design:paramtypes",[Object]),a("design:returntype",void 0)],t.prototype,"onKeyup",null),r([o.Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}}),a("design:paramtypes",[o.ElementRef,o.NgZone])],t)}();e.Password=h;var p=r([o.NgModule({imports:[n.CommonModule],exports:[h],declarations:[h]})],(function(){}));e.PasswordModule=p},"YD+O":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return o}));var r=i("8Y7J"),a=function(){function t(e,i,a){_classCallCheck(this,t),this.sanitizer=e,this.cd=i,this.zone=a,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="base64",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new r.EventEmitter,this.startCropImage=new r.EventEmitter,this.imageLoaded=new r.EventEmitter,this.cropperReady=new r.EventEmitter,this.loadImageFailed=new r.EventEmitter,this.initCropper()}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.originalImage&&this.originalImage.complete&&t.containWithinAspectRatio&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()}},{key:"ngOnInit",value:function(){this.stepSize=this.initialStepSize}},{key:"initCropper",value:function(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.transformations={rotation:0,flipH:!1,flipV:!1},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}},{key:"loadImageFile",value:function(t){var e=this,i=new FileReader;i.onload=function(i){e.isValidImageType(t.type)?e.checkExifAndLoadBase64Image(i.target.result):e.loadImageFailed.emit()},i.readAsDataURL(t)}},{key:"isValidImageType",value:function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)}},{key:"checkExifAndLoadBase64Image",value:function(t){var e=this;return new Promise((function(i,r){var a=function(t){e.originalImage=null,e.originalBase64=null,r(t)};e.originalImage=new Image,e.originalImage.onload=function(){e.originalBase64=t,e.transformations=function(t){switch("string"==typeof t&&(t=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),a=0;a<i;a++)r[a]=e.charCodeAt(a);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;for(var i=e.byteLength,r=2;r<i;){if(e.getUint16(r+2,!1)<=8)return-1;var a=e.getUint16(r,!1);if(r+=2,65505==a){if(1165519206!=e.getUint32(r+=2,!1))return-1;var o=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,o);var n=e.getUint16(r,o);r+=2;for(var s=0;s<n;s++)if(274==e.getUint16(r+12*s,o))return e.getUint16(r+12*s+8,o)}else{if(65280!=(65280&a))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotation:0,flipH:!0,flipV:!1};case 3:return{rotation:2,flipH:!1,flipV:!1};case 4:return{rotation:2,flipH:!0,flipV:!1};case 5:return{rotation:1,flipH:!0,flipV:!1};case 6:return{rotation:1,flipH:!1,flipV:!1};case 7:return{rotation:3,flipH:!0,flipV:!1};case 8:return{rotation:3,flipH:!1,flipV:!1};default:return{rotation:0,flipH:!1,flipV:!1}}}(t),e.originalSize.width=e.originalImage.naturalWidth,e.originalSize.height=e.originalImage.naturalHeight,e.transformOriginalImage().then((function(){return i()})).catch(a)},e.originalImage.onerror=a,e.originalImage.src=t}))}},{key:"checkRotation",value:function(){this.transformations.rotation<0&&(this.transformations.rotation+=4),this.transformations.rotation=this.transformations.rotation%4}},{key:"getTransformedSize",value:function(){if(this.containWithinAspectRatio){if(this.transformations.rotation%2){var t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}var e=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,e)}}return this.transformations.rotation%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}},{key:"transformImageBase64",value:function(){this.checkRotation();var t=this.getTransformedSize(),e=document.createElement("canvas");e.width=t.width,e.height=t.height;var i=e.getContext("2d");return i.setTransform(this.transformations.flipH?-1:1,0,0,this.transformations.flipV?-1:1,e.width/2,e.height/2),i.rotate(Math.PI*(this.transformations.rotation/2)),i.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),Promise.resolve(e.toDataURL())}},{key:"setTransformedImage",value:function(t){var e=this;return new Promise((function(i,r){e.transformedBase64=t,e.safeImgDataUrl=e.sanitizer.bypassSecurityTrustResourceUrl(t),e.transformedImage=new Image,e.transformedImage.onload=function(){e.transformedSize.width=e.transformedImage.naturalWidth,e.transformedSize.height=e.transformedImage.naturalHeight,i(),e.cd.markForCheck()},e.transformedImage.onerror=function(){e.transformedImage=null,r()},e.transformedImage.src=e.transformedBase64}))}},{key:"transformOriginalImage",value:function(){var t=this;return this.originalImage&&this.originalImage.complete?this.transformImageBase64().then((function(e){return t.setTransformedImage(e)})):Promise.reject(new Error("No Image Loaded"))}},{key:"imageLoadedInView",value:function(){var t=this;null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout((function(){return t.checkImageMaxSizeRecursively()})))}},{key:"checkImageMaxSizeRecursively",value:function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout((function(){t.checkImageMaxSizeRecursively()}),50))}},{key:"onResize",value:function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}},{key:"rotateLeft",value:function(){return this.transformations.rotation--,this.flipAfterRotate(),this.transformOriginalImage()}},{key:"rotateRight",value:function(){return this.transformations.rotation++,this.flipAfterRotate(),this.transformOriginalImage()}},{key:"flipAfterRotate",value:function(){var t=this.transformations.flipH;this.transformations.flipH=this.transformations.flipV,this.transformations.flipV=t}},{key:"flipHorizontal",value:function(){return this.transformations.flipH=!this.transformations.flipH,this.transformOriginalImage()}},{key:"flipVertical",value:function(){return this.transformations.flipV=!this.transformations.flipV,this.transformOriginalImage()}},{key:"resetImage",value:function(){this.imageBase64=this.originalBase64}},{key:"resizeCropperPosition",value:function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}},{key:"resetCropperPosition",value:function(){var t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}},{key:"keyboardAccess",value:function(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}},{key:"changeKeyboardStepSize",value:function(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}},{key:"keyboardMoveCropper",value:function(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var e=t.shiftKey?"resize":"move",i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),r=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(r),this.moveStop()}}},{key:"getPositionForKey",value:function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}},{key:"getInvertedPositionForKey",value:function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}},{key:"getEventForKey",value:function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}},{key:"startMove",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)}},{key:"moveImg",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"setMaxSize",value:function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}},{key:"setCropperScaledMinSize",value:function(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}},{key:"setCropperScaledMinWidth",value:function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}},{key:"setCropperScaledMinHeight",value:function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}},{key:"checkCropperPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}},{key:"moveStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"move",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}},{key:"resize",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}},{key:"checkAspectRatio",value:function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}}},{key:"doAutoCrop",value:function(){this.autoCrop&&this.crop()}},{key:"crop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.outputType;if(this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();var e=this.getImagePosition(),i=e.x2-e.x1,r=e.y2-e.y1,a=document.createElement("canvas");a.width=i,a.height=r;var o=a.getContext("2d");if(o){null!=this.backgroundColor&&(o.fillStyle=this.backgroundColor,o.fillRect(0,0,i,r)),o.drawImage(this.transformedImage,e.x1,e.y1,i,r,0,0,i,r);var n={width:i,height:r,imagePosition:e,cropperPosition:Object.assign({},this.cropper),transform:Object.assign({},this.transformations)};this.containWithinAspectRatio&&(n.offsetImagePosition=this.getOffsetImagePosition());var s=this.getResizeRatio(i,r);return 1!==s&&(n.width=Math.round(i*s),n.height=this.maintainAspectRatio?Math.round(n.width/this.aspectRatio):Math.round(r*s),function(t,e,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.width,o=t.height,n=a/(e=Math.round(e)),s=o/(i=Math.round(i)),h=Math.ceil(n/2),p=Math.ceil(s/2),c=t.getContext("2d");if(c){for(var l=c.getImageData(0,0,a,o),u=c.createImageData(e,i),d=l.data,f=u.data,m=0;m<i;m++)for(var g=0;g<e;g++){var y=4*(g+m*e),v=m*s,x=0,S=0,k=0,w=0,I=0,b=0,z=0,M=Math.floor(g*n),C=Math.floor(m*s),R=Math.ceil((g+1)*n),A=Math.ceil((m+1)*s);R=Math.min(R,a),A=Math.min(A,o);for(var H=C;H<A;H++)for(var E=Math.abs(v-H)/p,P=g*n,D=E*E,W=M;W<R;W++){var F=Math.abs(P-W)/h,L=Math.sqrt(D+F*F);if(!(L>=1)){var O=4*(W+H*a);z+=(x=2*L*L*L-3*L*L+1)*d[O+3],k+=x,d[O+3]<255&&(x=x*d[O+3]/250),w+=x*d[O],I+=x*d[O+1],b+=x*d[O+2],S+=x}}f[y]=w/S,f[y+1]=I/S,f[y+2]=b/S,f[y+3]=z/k}r?(t.width=e,t.height=i):c.clearRect(0,0,a,o),c.putImageData(u,0,0)}}(a,n.width,n.height)),this.cropToOutputType(t,a,n)}}return null}},{key:"getImagePosition",value:function(){var t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}},{key:"getOffsetImagePosition",value:function(){var t,e,i=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;this.transformations.rotation%2?(t=(this.transformedSize.width-this.originalSize.height)/2,e=(this.transformedSize.height-this.originalSize.width)/2):(t=(this.transformedSize.width-this.originalSize.width)/2,e=(this.transformedSize.height-this.originalSize.height)/2);var r={x1:Math.round(this.cropper.x1*i)-t,y1:Math.round(this.cropper.y1*i)-e,x2:Math.round(this.cropper.x2*i)-t,y2:Math.round(this.cropper.y2*i)-e};return this.containWithinAspectRatio||(r.x1=Math.max(r.x1,0),r.y1=Math.max(r.y1,0),r.x2=Math.min(r.x2,this.transformedSize.width),r.y2=Math.min(r.y2,this.transformedSize.height)),r}},{key:"cropToOutputType",value:function(t,e,i){var r=this;switch(t){case"file":return this.cropToFile(e).then((function(t){return i.file=t,r.imageCropped.emit(i),i}));case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then((function(t){return i.file=t,r.imageCropped.emit(i),i}));default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}}},{key:"cropToBase64",value:function(t){return t.toDataURL("image/"+this.format,this.getQuality())}},{key:"cropToFile",value:function(t){var e=this;return new Promise((function(i){t.toBlob((function(t){return e.zone.run((function(){return i(t)}))}),"image/"+e.format,e.getQuality())}))}},{key:"getQuality",value:function(){return Math.min(1,Math.max(0,this.imageQuality/100))}},{key:"getResizeRatio",value:function(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}},{key:"getClientX",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}},{key:"getClientY",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}},{key:"imageChangedEvent",set:function(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}},{key:"imageBase64",set:function(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}},{key:"imageFile",set:function(t){this.initCropper(),t&&this.loadImageFile(t)}}]),t}(),o=function t(){_classCallCheck(this,t)}},eiLQ:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return h}));var r=i("8Y7J"),a=(i("oz/p"),i("SVse")),o=i("Fa87"),n=i("s7LF"),s=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function h(t){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{inputViewChild:0}),(t()(),r["\u0275eld"](1,0,[[1,0],["input",1]],null,5,"input",[["pInputText",""]],[[1,"id",0],[1,"type",0],[1,"name",0],[1,"placeholder",0],[1,"title",0],[1,"size",0],[1,"autocomplete",0],[1,"maxlength",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-required",0],[8,"disabled",0],[8,"readOnly",0],[1,"required",0],[1,"autofocus",0],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"focus"],[null,"blur"],[null,"keydown"],[null,"keypress"],[null,"input"],[null,"paste"]],(function(t,e,i){var a=!0,o=t.component;return"input"===e&&(a=!1!==r["\u0275nov"](t,6).onInput(i)&&a),"focus"===e&&(a=!1!==o.onInputFocus(i)&&a),"blur"===e&&(a=!1!==o.onInputBlur(i)&&a),"keydown"===e&&(a=!1!==o.onKeyDown(i)&&a),"keypress"===e&&(a=!1!==o.onKeyPress(i)&&a),"input"===e&&(a=!1!==o.onInputChange(i)&&a),"paste"===e&&(a=!1!==o.handleInputChange(i)&&a),a}),null,null)),r["\u0275prd"](512,null,a["\u0275NgClassImpl"],a["\u0275NgClassR2Impl"],[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2]),r["\u0275did"](3,278528,null,0,a.NgClass,[a["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),r["\u0275prd"](512,null,a["\u0275NgStyleImpl"],a["\u0275NgStyleR2Impl"],[r.ElementRef,r.KeyValueDiffers,r.Renderer2]),r["\u0275did"](5,278528,null,0,a.NgStyle,[a["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),r["\u0275did"](6,278528,null,0,o.InputText,[r.ElementRef,[2,n.NgModel]],null,null)],(function(t,e){var i=e.component;t(e,3,0,i.styleClass),t(e,5,0,i.style),t(e,6,0)}),(function(t,e){var i=e.component;t(e,1,1,[i.inputId,i.type,i.name,i.placeholder,i.title,i.size,i.autocomplete,i.maxlength,i.tabindex,i.ariaLabel,i.ariaRequired,i.disabled,i.readonly,i.required,i.autoFocus,!0,!0,!0,!0,r["\u0275nov"](e,6).filled])}))}}}]);