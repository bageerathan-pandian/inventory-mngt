(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{CcaC:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var s=i("IheW"),r=i("AytR"),a=i("HDdC"),o=i("gFX4"),n=i("0hB7"),h=i("8Y7J");let p=(()=>{class t{constructor(t,e){this.httpClient=t,this.sessionService=e,this.socket=o(r.a.api_url)}getUsers(){return this.httpClient.get(r.a.api_url+"/api/users")}getUser(){return this.httpClient.get(r.a.api_url+"/api/users/"+this.sessionService.getItem("_id"))}getUsersByCompany(){return this.httpClient.get(r.a.api_url+"/api/users/get-by-company/"+this.sessionService.getItem("company_id"))}addUser(t){var e=JSON.stringify(t);console.log("body",e);var i=new s.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.post(r.a.api_url+"/api/users",e,{headers:i})}updateUser(t){var e=JSON.stringify(t);console.log("body",e);var i=new s.HttpHeaders({"Content-Type":"application/json"});return this.httpClient.put(r.a.api_url+"/api/users/"+t._id,e,{headers:i})}deleteUser(t){return this.httpClient.delete(r.a.api_url+"/api/users/"+t)}onCheckEmailExist(t){return this.httpClient.get(r.a.api_url+"/api/users/check-email-exist/"+t)}addUserSocktet(){return new a.a(t=>(this.socket=o(r.a.api_url),this.socket.on("add",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}deleteUserSocktet(){return new a.a(t=>(this.socket=o(r.a.api_url),this.socket.on("delete",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}updateUserSocktet(){return new a.a(t=>(this.socket=o(r.a.api_url),this.socket.on("update",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}statusUpdateUserSocktet(){return new a.a(t=>(this.socket=o(r.a.api_url),this.socket.on("status",e=>{t.next(e)}),()=>{this.socket.disconnect()}))}}return t.ngInjectableDef=h["\u0275\u0275defineInjectable"]({factory:function(){return new t(h["\u0275\u0275inject"](s.HttpClient),h["\u0275\u0275inject"](n.a))},token:t,providedIn:"root"}),t})()},DX9g:function(t,e,i){"use strict";i.d(e,"a",function(){return o});var s=i("AytR"),r=i("8Y7J"),a=i("IheW");let o=(()=>{class t{constructor(t){this.httpClient=t}imageUpload(t){let e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(s.a.api_url+"/api/image-upload",e)}profileImageUpload(t){let e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(s.a.api_url+"/api/image-upload/profile",e)}companyLogoUpload(t){let e=new FormData;return e.append("image",t,t.name),console.log("body",e),this.httpClient.post(s.a.api_url+"/api/image-upload/logo",e)}}return t.ngInjectableDef=r["\u0275\u0275defineInjectable"]({factory:function(){return new t(r["\u0275\u0275inject"](a.HttpClient))},token:t,providedIn:"root"}),t})()},NqMA:function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var r,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(r=t[n])&&(o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=i("8Y7J"),o=i("SVse"),n=i("sdDj"),h=function(){function t(t,e){this.el=t,this.zone=e,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}return Object.defineProperty(t.prototype,"showPassword",{set:function(t){this.el.nativeElement.type=t?"text":"password"},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){this.updateFilledState()},t.prototype.onInput=function(t){this.updateFilledState()},t.prototype.updateFilledState=function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length},t.prototype.createPanel=function(){this.panel=document.createElement("div"),this.panel.className="ui-password-panel ui-widget ui-state-highlight ui-corner-all",this.meter=document.createElement("div"),this.meter.className="ui-password-meter",this.info=document.createElement("div"),this.info.className="ui-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=n.DomHandler.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)},t.prototype.onFocus=function(t){var e=this;this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++n.DomHandler.zindex),this.zone.runOutsideAngular(function(){setTimeout(function(){n.DomHandler.addClass(e.panel,"ui-password-panel-visible"),n.DomHandler.removeClass(e.panel,"ui-password-panel-hidden")},1),n.DomHandler.absolutePosition(e.panel,e.el.nativeElement)}))},t.prototype.onBlur=function(t){var e=this;this.feedback&&(n.DomHandler.addClass(this.panel,"ui-password-panel-hidden"),n.DomHandler.removeClass(this.panel,"ui-password-panel-visible"),this.zone.runOutsideAngular(function(){setTimeout(function(){e.ngOnDestroy()},150)}))},t.prototype.onKeyup=function(t){if(this.feedback){var e=t.target.value,i=null,s=null;if(0===e.length)i=this.promptLabel,s="0px 0px";else{var r=this.testStrength(e);r<30?(i=this.weakLabel,s="0px -10px"):r>=30&&r<80?(i=this.mediumLabel,s="0px -20px"):r>=80&&(i=this.strongLabel,s="0px -30px")}this.meter.style.backgroundPosition=s,this.info.textContent=i}},t.prototype.testStrength=function(t){var e,i=0;return e=t.match("[0-9]"),i+=25*this.normalize(e?e.length:.25,1),e=t.match("[a-zA-Z]"),i+=10*this.normalize(e?e.length:.5,3),e=t.match("[!@#$%^&*?_~.,;=]"),i+=35*this.normalize(e?e.length:1/6,1),e=t.match("[A-Z]"),i+=30*this.normalize(e?e.length:1/6,1),(i*=t.length/8)>100?100:i},t.prototype.normalize=function(t,e){return t-e<=0?t/e:1+t/(t+e/4)*.5},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.el.nativeElement.disabled},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.panel&&(document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)},s([a.Input(),r("design:type",String)],t.prototype,"promptLabel",void 0),s([a.Input(),r("design:type",String)],t.prototype,"weakLabel",void 0),s([a.Input(),r("design:type",String)],t.prototype,"mediumLabel",void 0),s([a.Input(),r("design:type",String)],t.prototype,"strongLabel",void 0),s([a.Input(),r("design:type",Boolean)],t.prototype,"feedback",void 0),s([a.Input(),r("design:type",Boolean),r("design:paramtypes",[Boolean])],t.prototype,"showPassword",null),s([a.HostListener("input",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onInput",null),s([a.HostListener("focus",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onFocus",null),s([a.HostListener("blur",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onBlur",null),s([a.HostListener("keyup",["$event"]),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],t.prototype,"onKeyup",null),s([a.Directive({selector:"[pPassword]",host:{"[class.ui-inputtext]":"true","[class.ui-corner-all]":"true","[class.ui-state-default]":"true","[class.ui-widget]":"true","[class.ui-state-filled]":"filled"}}),r("design:paramtypes",[a.ElementRef,a.NgZone])],t)}();e.Password=h;var p=s([a.NgModule({imports:[o.CommonModule],exports:[h],declarations:[h]})],function(){});e.PasswordModule=p},"YD+O":function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o});var s=i("8Y7J");function r(t,e){return new Promise((i,s)=>{const r=new Image;r.onload=function(){const t=r.width,a=r.height,o=document.createElement("canvas"),n=o.getContext("2d");n?(4<e&&e<9?(o.width=a,o.height=t):(o.width=t,o.height=a),function(t,i,s,r){switch(e){case 2:t.transform(-1,0,0,1,s,0);break;case 3:t.transform(-1,0,0,-1,s,r);break;case 4:t.transform(1,0,0,-1,0,r);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,r,0);break;case 7:t.transform(0,-1,-1,0,r,s);break;case 8:t.transform(0,-1,1,0,0,s)}}(n,0,t,a),n.drawImage(r,0,0),i(o.toDataURL())):s(new Error("No context"))},r.src=t})}class a{constructor(t,e,i){this.sanitizer=t,this.cd=e,this.zone=i,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="base64",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.imageCropped=new s.EventEmitter,this.startCropImage=new s.EventEmitter,this.imageLoaded=new s.EventEmitter,this.cropperReady=new s.EventEmitter,this.loadImageFailed=new s.EventEmitter,this.initCropper()}set imageChangedEvent(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}set imageBase64(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}set imageFile(t){this.initCropper(),t&&this.loadImageFile(t)}ngOnChanges(t){t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()}initCropper(){this.imageVisible=!1,this.originalImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){const e=new FileReader;e.onload=e=>{this.isValidImageType(t.type)?this.checkExifAndLoadBase64Image(e.target.result):this.loadImageFailed.emit()},e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)}checkExifAndLoadBase64Image(t){(function(t){try{const i=function(e){const i=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=e.charCodeAt(r);return s.buffer}(t));if(65496!=i.getUint16(0,!1))return-2;const s=i.byteLength;let r=2;for(;r<s;){if(i.getUint16(r+2,!1)<=8)return-1;const t=i.getUint16(r,!1);if(r+=2,65505==t){if(1165519206!=i.getUint32(r+=2,!1))return-1;const t=18761==i.getUint16(r+=6,!1);r+=i.getUint32(r+4,t);const e=i.getUint16(r,t);r+=2;for(let s=0;s<e;s++)if(274==i.getUint16(r+12*s,t))return i.getUint16(r+12*s+8,t)}else{if(65280!=(65280&t))break;r+=i.getUint16(r,!1)}}return-1}();return i>1?r(t,i):Promise.resolve(t)}catch(e){return Promise.reject(e)}})(t).then(t=>this.fitImageToAspectRatio(t)).then(t=>this.loadBase64Image(t)).catch(()=>this.loadImageFailed.emit())}fitImageToAspectRatio(t){return this.containWithinAspectRatio?(e=t,i=this.aspectRatio,new Promise((t,s)=>{const r=new Image;r.onload=function(){const e=document.createElement("canvas"),a=e.getContext("2d");if(a){const s=r.width/i;e.width=Math.max(r.width,r.height*i),e.height=Math.max(r.height,s),a.drawImage(r,(e.width-r.width)/2,(e.height-r.height)/2),t(e.toDataURL())}else s(new Error("No context"))},r.src=e})):Promise.resolve(t);var e,i}loadBase64Image(t){this.originalBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.originalImage=new Image,this.originalImage.onload=()=>{this.originalSize.width=this.originalImage.width,this.originalSize.height=this.originalImage.height,this.cd.markForCheck()},this.originalImage.src=t}imageLoadedInView(){null!=this.originalImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>{this.checkImageMaxSizeRecursively()},50))}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}rotateLeft(){this.transformBase64(8)}rotateRight(){this.transformBase64(6)}flipHorizontal(){this.transformBase64(2)}flipVertical(){this.transformBase64(4)}transformBase64(t){this.originalBase64&&r(this.originalBase64,t).then(t=>this.fitImageToAspectRatio(t)).then(t=>this.loadBase64Image(t))}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}startMove(t,e,i=null){t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)}moveImg(t){this.moveStart.active&&(t.stopPropagation(),t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.originalImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.originalImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.originalImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.outputType){if(this.sourceImage.nativeElement&&null!=this.originalImage){this.startCropImage.emit();const e=this.getImagePosition(),i=e.x2-e.x1,s=e.y2-e.y1,r=document.createElement("canvas");r.width=i,r.height=s;const a=r.getContext("2d");if(a){null!=this.backgroundColor&&(a.fillStyle=this.backgroundColor,a.fillRect(0,0,i,s)),a.drawImage(this.originalImage,e.x1,e.y1,i,s,0,0,i,s);const o={width:i,height:s,imagePosition:e,cropperPosition:Object.assign({},this.cropper)},n=this.getResizeRatio(i,s);return 1!==n&&(o.width=Math.round(i*n),o.height=this.maintainAspectRatio?Math.round(o.width/this.aspectRatio):Math.round(s*n),function(t,e,i,s=!0){const r=t.width,a=t.height,o=r/(e=Math.round(e)),n=a/(i=Math.round(i)),h=Math.ceil(o/2),p=Math.ceil(n/2),c=t.getContext("2d");if(c){const l=c.getImageData(0,0,r,a),d=c.createImageData(e,i),u=l.data,m=d.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const s=4*(i+t*e),c=t*n;let l=0,d=0,g=0,f=0,y=0,x=0,S=0;const v=Math.floor(i*o),b=Math.floor(t*n);let w=Math.ceil((i+1)*o),M=Math.ceil((t+1)*n);w=Math.min(w,r),M=Math.min(M,a);for(let t=b;t<M;t++){const e=Math.abs(c-t)/p,s=i*o,a=e*e;for(let i=v;i<w;i++){const e=Math.abs(s-i)/h,o=Math.sqrt(a+e*e);if(o>=1)continue;const n=4*(i+t*r);S+=(l=2*o*o*o-3*o*o+1)*u[n+3],g+=l,u[n+3]<255&&(l=l*u[n+3]/250),f+=l*u[n],y+=l*u[n+1],x+=l*u[n+2],d+=l}}m[s]=f/d,m[s+1]=y/d,m[s+2]=x/d,m[s+3]=S/g}s?(t.width=e,t.height=i):c.clearRect(0,0,r,a),c.putImageData(d,0,0)}}(r,o.width,o.height)),this.cropToOutputType(t,r,o)}}return null}getImagePosition(){const t=this.originalSize.width/this.sourceImage.nativeElement.offsetWidth;return{x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.min(Math.round(this.cropper.x2*t),this.originalSize.width),y2:Math.min(Math.round(this.cropper.y2*t),this.originalSize.height)}}cropToOutputType(t,e,i){switch(t){case"file":return this.cropToFile(e).then(t=>(i.file=t,this.imageCropped.emit(i),i));case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then(t=>(i.file=t,this.imageCropped.emit(i),i));default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}cropToFile(t){return new Promise(e=>{t.toBlob(t=>this.zone.run(()=>e(t)),"image/"+this.format,this.getQuality())})}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}getClientX(t){return t.touches&&t.touches[0]&&t.touches[0].clientX||t.clientX}getClientY(t){return t.touches&&t.touches[0]&&t.touches[0].clientY||t.clientY}}class o{}},eiLQ:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return h});var s=i("8Y7J"),r=(i("oz/p"),i("SVse")),a=i("Fa87"),o=i("s7LF"),n=s["\u0275crt"]({encapsulation:2,styles:[],data:{}});function h(t){return s["\u0275vid"](0,[s["\u0275qud"](402653184,1,{inputViewChild:0}),(t()(),s["\u0275eld"](1,0,[[1,0],["input",1]],null,5,"input",[["pInputText",""]],[[1,"id",0],[1,"type",0],[1,"name",0],[1,"placeholder",0],[1,"title",0],[1,"size",0],[1,"autocomplete",0],[1,"maxlength",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-required",0],[8,"disabled",0],[8,"readOnly",0],[1,"required",0],[1,"autofocus",0],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"focus"],[null,"blur"],[null,"keydown"],[null,"keypress"],[null,"input"],[null,"paste"]],function(t,e,i){var r=!0,a=t.component;return"input"===e&&(r=!1!==s["\u0275nov"](t,6).onInput(i)&&r),"focus"===e&&(r=!1!==a.onInputFocus(i)&&r),"blur"===e&&(r=!1!==a.onInputBlur(i)&&r),"keydown"===e&&(r=!1!==a.onKeyDown(i)&&r),"keypress"===e&&(r=!1!==a.onKeyPress(i)&&r),"input"===e&&(r=!1!==a.onInputChange(i)&&r),"paste"===e&&(r=!1!==a.handleInputChange(i)&&r),r},null,null)),s["\u0275prd"](512,null,r["\u0275NgClassImpl"],r["\u0275NgClassR2Impl"],[s.IterableDiffers,s.KeyValueDiffers,s.ElementRef,s.Renderer2]),s["\u0275did"](3,278528,null,0,r.NgClass,[r["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),s["\u0275prd"](512,null,r["\u0275NgStyleImpl"],r["\u0275NgStyleR2Impl"],[s.ElementRef,s.KeyValueDiffers,s.Renderer2]),s["\u0275did"](5,278528,null,0,r.NgStyle,[r["\u0275NgStyleImpl"]],{ngStyle:[0,"ngStyle"]},null),s["\u0275did"](6,278528,null,0,a.InputText,[s.ElementRef,[2,o.NgModel]],null,null)],function(t,e){var i=e.component;t(e,3,0,i.styleClass),t(e,5,0,i.style),t(e,6,0)},function(t,e){var i=e.component;t(e,1,1,[i.inputId,i.type,i.name,i.placeholder,i.title,i.size,i.autocomplete,i.maxlength,i.tabindex,i.ariaLabel,i.ariaRequired,i.disabled,i.readonly,i.required,i.autoFocus,!0,!0,!0,!0,s["\u0275nov"](e,6).filled])})}}}]);